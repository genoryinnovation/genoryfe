import{d as k,r as p,m as U,f as q,q as V,c,a as t,t as b,s as C,e as s,v as d,p as y,F as S,l as P,w as L,u as N,o as v}from"./index-C4KQTk6n.js";import{C as i}from"./catalog.service-DTry473v.js";import"./api-Csnh6SWI.js";const D={class:"flex justify-between items-center mb-6"},F={class:"text-2xl font-semibold text-gray-900"},j={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},M={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},B=["value"],E={class:"border-t pt-6"},G={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},R={class:"flex justify-end"},I=["disabled"],Q=k({__name:"form",setup(T){const a=V(),u=N(),m=p(!1),n=p(!1),g=p([]),r=U({title:"",sku:"",description:"",price:0,currency:"NGN",category:"",inventory:{quantity:0,unit:"pieces",reorderLevel:10},status:"active",images:[]}),f=async()=>{try{const l=await i.getCategories();g.value=l.data}catch(l){console.error("Failed to fetch categories",l)}},x=async l=>{try{const o=(await i.getProduct(l)).data;Object.assign(r,{title:o.title,sku:o.sku,description:o.description,price:o.price,currency:o.currency,category:o.category._id||o.category,inventory:{quantity:o.inventory.quantity,unit:o.inventory.unit,reorderLevel:o.inventory.reorderLevel},status:o.status,images:o.images})}catch(e){console.error("Failed to fetch product",e),u.push("/admin/catalog/products")}},w=async()=>{n.value=!0;try{m.value?await i.updateProduct(a.params.id,r):await i.createProduct(r),u.push("/admin/catalog/products")}catch(l){console.error("Failed to save product",l),alert("Failed to save product")}finally{n.value=!1}};return q(async()=>{await f(),a.params.id&&(m.value=!0,await x(a.params.id))}),(l,e)=>(v(),c("div",null,[t("div",D,[t("h1",F,b(m.value?"Edit Product":"Create Product"),1),t("button",{onClick:e[0]||(e[0]=o=>C(u).back()),class:"text-gray-600 hover:text-gray-900"}," Cancel ")]),t("form",{onSubmit:L(w,["prevent"]),class:"bg-white shadow rounded-lg p-6 space-y-6"},[t("div",j,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Title",-1)),s(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.title=o),type:"text",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.title]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"SKU",-1)),s(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.sku=o),type:"text",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.sku]])])]),t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-gray-700"},"Description",-1)),s(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.description=o),rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.description]])]),t("div",M,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-700"},"Price",-1)),s(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.price=o),type:"number",min:"0",step:"0.01",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.price,void 0,{number:!0}]])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-700"},"Currency",-1)),s(t("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.currency=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},[...e[15]||(e[15]=[t("option",{value:"NGN"},"NGN",-1),t("option",{value:"USD"},"USD",-1)])],512),[[y,r.currency]])]),t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-gray-700"},"Category",-1)),s(t("select",{"onUpdate:modelValue":e[6]||(e[6]=o=>r.category=o),required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},[(v(!0),c(S,null,P(g.value,o=>(v(),c("option",{key:o._id,value:o._id},b(o.name),9,B))),128))],512),[[y,r.category]])])]),t("div",E,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Inventory",-1)),t("div",G,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-gray-700"},"Quantity",-1)),s(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>r.inventory.quantity=o),type:"number",min:"0",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.inventory.quantity,void 0,{number:!0}]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-gray-700"},"Unit",-1)),s(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>r.inventory.unit=o),type:"text",required:"",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"e.g., pieces, kg"},null,512),[[d,r.inventory.unit]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-gray-700"},"Reorder Level",-1)),s(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>r.inventory.reorderLevel=o),type:"number",min:"0",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},null,512),[[d,r.inventory.reorderLevel,void 0,{number:!0}]])])])]),t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),s(t("select",{"onUpdate:modelValue":e[10]||(e[10]=o=>r.status=o),class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},[...e[22]||(e[22]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"discontinued"},"Discontinued",-1)])],512),[[y,r.status]])]),t("div",R,[t("button",{type:"submit",disabled:n.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},b(n.value?"Saving...":"Save Product"),9,I)])],32)]))}});export{Q as default};
