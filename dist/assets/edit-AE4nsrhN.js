import{d as M,M as E,r as b,y as G,o as A,a as f,j as x,b as t,e as S,t as B,u as N,k as z,x as D,i as F,h as P,w as V,E as T,p as i,z as d,B as j,q as C,C as L}from"./index-CVDPA8xH.js";import{C as U}from"./configuration.service-CbYpThlS.js";import"./api-4GkiaaGr.js";const I={class:"space-y-4"},K={key:0,class:"text-sm text-red-500"},R=M({__name:"LocationPicker",props:{lat:{},lng:{}},emits:["update:lat","update:lng"],setup(h,{emit:w}){const m=h,p=w,{lat:k,lng:o}=E(m),y=b(null),v=b(null),s=b(null),e=b(null),r=b(""),l=()=>new Promise((a,c)=>{if(window.google&&window.google.maps){a();return}const u=document.getElementById("google-maps-script");if(u){u.addEventListener("load",()=>a()),u.addEventListener("error",()=>c(new Error("Failed to load Google Maps script")));return}const n="AIzaSyBkZraD0rt4dP0TslLVMexomnye48jFcW0",g=document.createElement("script");g.id="google-maps-script",g.src=`https://maps.googleapis.com/maps/api/js?key=${n}&libraries=places`,g.async=!0,g.defer=!0,g.onload=()=>a(),g.onerror=()=>c(new Error("Failed to load Google Maps script")),document.head.appendChild(g)}),q=()=>{if(!y.value||!window.google)return;const a=window.google,c=m.lat===0&&m.lng===0?{lat:6.5244,lng:3.3792}:{lat:m.lat,lng:m.lng};if(s.value=new a.maps.Map(y.value,{center:c,zoom:13,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),e.value=new a.maps.Marker({position:c,map:s.value,draggable:!0,animation:a.maps.Animation.DROP}),v.value){const u=new a.maps.places.Autocomplete(v.value,{fields:["geometry","name"],strictBounds:!1});u.bindTo("bounds",s.value),u.addListener("place_changed",()=>{const n=u.getPlace();if(!n.geometry||!n.geometry.location){window.alert("No details available for input: '"+n.name+"'");return}n.geometry.viewport?s.value.fitBounds(n.geometry.viewport):(s.value.setCenter(n.geometry.location),s.value.setZoom(17)),e.value.setPosition(n.geometry.location),p("update:lat",n.geometry.location.lat()),p("update:lng",n.geometry.location.lng())})}e.value.addListener("dragend",()=>{const u=e.value.getPosition();u&&(p("update:lat",u.lat()),p("update:lng",u.lng()))}),s.value.addListener("click",u=>{const n=u.latLng;n&&(e.value.setPosition(n),s.value.panTo(n),p("update:lat",n.lat()),p("update:lng",n.lng()))})};return G([k,o],()=>{if(s.value&&e.value&&window.google){const a={lat:m.lat,lng:m.lng},c=e.value.getPosition();if(c&&Math.abs(c.lat()-a.lat)<1e-5&&Math.abs(c.lng()-a.lng)<1e-5)return;e.value.setPosition(a),s.value.panTo(a)}}),A(async()=>{try{await l(),q()}catch(a){r.value=a.message,console.error(a)}}),(a,c)=>(x(),f("div",I,[t("input",{ref_key:"searchInput",ref:v,type:"text",placeholder:"Search for a place...",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all shadow-sm"},null,512),t("div",{ref_key:"mapContainer",ref:y,class:"w-full h-[400px] rounded-xl border border-slate-200 shadow-sm bg-slate-50"},null,512),r.value?(x(),f("div",K,B(r.value),1)):S("",!0)]))}}),O={class:"max-w-3xl mx-auto space-y-6"},$={class:"flex items-center space-x-4"},H={key:0,class:"flex justify-center py-12"},Z={class:"grid grid-cols-1 gap-6"},J={class:"flex items-center"},W={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"md:col-span-2"},X={class:"md:col-span-2"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_={class:"md:col-span-2"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"space-y-6"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"flex items-center justify-end space-x-4 pt-6 border-t border-slate-100"},se=["disabled"],ae={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ne=M({__name:"edit",setup(h){const w=N(),m=z(),p=b(!1),k=b(!0),o=D({name:"",isActive:!0,address:{street:"",city:"",state:"",zipCode:"",country:"Nigeria",landmark:""},contact:{name:"",phone:"",email:""},geolocation:{lat:0,lng:0}}),y=async()=>{try{const s=m.params.id,r=(await U.getPickupLocation(s)).data;o.name=r.name,o.isActive=r.isActive,o.address={...r.address},o.contact={...r.contact},r.geolocation?o.geolocation={...r.geolocation}:o.geolocation={lat:0,lng:0},o.costPerKm=r.costPerKm||0,o.costPerGram=r.costPerGram||0}catch(s){console.error("Failed to load location:",s),alert("Failed to load location details."),w.push("/admin/configuration/pickup-locations")}finally{k.value=!1}},v=async()=>{p.value=!0;try{const s=m.params.id;await U.updatePickupLocation(s,o),w.push("/admin/configuration/pickup-locations")}catch(s){console.error("Failed to update location:",s),alert("Failed to update pickup location. Please try again.")}finally{p.value=!1}};return A(()=>{y()}),(s,e)=>{const r=F("router-link");return x(),f("div",O,[t("div",$,[P(r,{to:"/admin/configuration/pickup-locations",class:"p-2 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"},{default:V(()=>[...e[17]||(e[17]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1}),e[18]||(e[18]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Edit Pickup Location"),t("p",{class:"mt-1 text-sm text-slate-500"},"Update location details and contact information.")],-1))]),k.value?(x(),f("div",H,[...e[19]||(e[19]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1)])])):(x(),f("form",{key:1,onSubmit:T(v,["prevent"]),class:"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-8"},[t("section",null,[e[23]||(e[23]=t("h2",{class:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100"},"Location Basics",-1)),t("div",Z,[t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Location Name",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>o.name=l),type:"text",required:"",placeholder:"e.g. Lagos Central Hub",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.name]]),e[21]||(e[21]=t("p",{class:"mt-1 text-xs text-slate-500"},"Internal name for this location.",-1))]),t("div",J,[i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o.isActive=l),type:"checkbox",id:"isActive",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-slate-300 rounded"},null,512),[[j,o.isActive]]),e[22]||(e[22]=t("label",{for:"isActive",class:"ml-2 block text-sm text-slate-700"}," Active (Customers can select this location) ",-1))])])]),t("section",null,[e[30]||(e[30]=t("h2",{class:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100"},"Address Details",-1)),t("div",W,[t("div",Q,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Street Address",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o.address.street=l),type:"text",required:"",placeholder:"e.g. 123 Broad Street",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.address.street]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"City",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>o.address.city=l),type:"text",required:"",placeholder:"e.g. Ikeja",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.address.city]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"State",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>o.address.state=l),type:"text",required:"",placeholder:"e.g. Lagos",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.address.state]])]),t("div",null,[e[27]||(e[27]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Zip/Postal Code",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=l=>o.address.zipCode=l),type:"text",required:"",placeholder:"e.g. 100001",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.address.zipCode]])]),t("div",null,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Country",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=l=>o.address.country=l),type:"text",required:"",readonly:"",class:"w-full px-4 py-2 bg-slate-100 border border-slate-200 rounded-xl text-slate-500 cursor-not-allowed"},null,512),[[d,o.address.country]])]),t("div",X,[e[29]||(e[29]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Landmark (Optional)",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=l=>o.address.landmark=l),type:"text",placeholder:"e.g. Opposite City Hall",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.address.landmark]])])])]),t("section",null,[e[34]||(e[34]=t("h2",{class:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100"},"Contact Person",-1)),t("div",Y,[t("div",_,[e[31]||(e[31]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Full Name",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=l=>o.contact.name=l),type:"text",required:"",placeholder:"e.g. John Doe",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.contact.name]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Phone Number",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=l=>o.contact.phone=l),type:"tel",required:"",placeholder:"e.g. +234 800 000 0000",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.contact.phone]])]),t("div",null,[e[33]||(e[33]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Email Address (Optional)",-1)),i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=l=>o.contact.email=l),type:"email",placeholder:"e.g. hub@genory.com",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.contact.email]])])])]),t("section",null,[e[39]||(e[39]=t("h2",{class:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100"},"Shipping Rates",-1)),t("div",ee,[t("div",null,[e[35]||(e[35]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Cost Per KM (₦)",-1)),i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=l=>o.costPerKm=l),type:"number",min:"0",placeholder:"e.g. 100",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.costPerKm,void 0,{number:!0}]]),e[36]||(e[36]=t("p",{class:"mt-1 text-xs text-slate-500"},"Charge per kilometer distance.",-1))]),t("div",null,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Cost Per Gram (₦)",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=l=>o.costPerGram=l),type:"number",min:"0",placeholder:"e.g. 0.5",step:"0.01",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.costPerGram,void 0,{number:!0}]]),e[38]||(e[38]=t("p",{class:"mt-1 text-xs text-slate-500"},"Additional charge per gram of weight.",-1))])])]),t("section",null,[e[42]||(e[42]=t("h2",{class:"text-lg font-bold text-slate-900 mb-4 pb-2 border-b border-slate-100"},"Geolocation",-1)),t("div",te,[P(R,{lat:o.geolocation.lat,lng:o.geolocation.lng,"onUpdate:lat":e[13]||(e[13]=l=>o.geolocation.lat=l),"onUpdate:lng":e[14]||(e[14]=l=>o.geolocation.lng=l)},null,8,["lat","lng"]),t("div",oe,[t("div",null,[e[40]||(e[40]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},[C("Latitude "),t("span",{class:"text-red-500"},"*")],-1)),i(t("input",{"onUpdate:modelValue":e[15]||(e[15]=l=>o.geolocation.lat=l),type:"number",required:"",step:"any",placeholder:"e.g. 6.5244",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.geolocation.lat,void 0,{number:!0}]])]),t("div",null,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},[C("Longitude "),t("span",{class:"text-red-500"},"*")],-1)),i(t("input",{"onUpdate:modelValue":e[16]||(e[16]=l=>o.geolocation.lng=l),type:"number",required:"",step:"any",placeholder:"e.g. 3.3792",class:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:bg-white transition-all"},null,512),[[d,o.geolocation.lng,void 0,{number:!0}]])])])])]),t("div",le,[P(r,{to:"/admin/configuration/pickup-locations",class:"px-6 py-2 text-slate-600 hover:text-slate-900 font-medium transition-colors"},{default:V(()=>[...e[43]||(e[43]=[C(" Cancel ",-1)])]),_:1}),t("button",{type:"submit",disabled:p.value,class:"flex items-center px-6 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl transition-colors shadow-lg shadow-primary-500/30 disabled:opacity-50 disabled:cursor-not-allowed"},[p.value?(x(),f("svg",ae,[...e[44]||(e[44]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):S("",!0),C(" "+B(p.value?"Saving...":"Save Changes"),1)],8,se)])],32))])}}});typeof L=="function"&&L(ne);export{ne as default};
