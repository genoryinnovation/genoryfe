import{d as k,r as n,o as S,a as d,j as p,e as f,b as e,q as m,s as u,C as b,v as x,t as A,y}from"./index-5jFCLG0b.js";import{P as v}from"./partner-portal.service-BUr-YCxR.js";import"./api-Cc7xRAfh.js";const C={class:"max-w-4xl space-y-8 relative"},P={key:0,class:"absolute inset-0 bg-white/50 backdrop-blur-[2px] flex items-center justify-center z-10 rounded-xl"},_={class:"bg-white rounded-xl shadow-sm border border-slate-200 divide-y divide-slate-100"},E={class:"p-6"},N={class:"mt-6 space-y-6"},V={class:"flex items-center justify-between"},j={class:"relative inline-flex items-center cursor-pointer"},F={key:0,class:"flex items-center space-x-4 p-4 bg-slate-50 rounded-lg animate-in fade-in slide-in-from-top-2"},M={class:"relative"},I={class:"p-6"},z={class:"mt-6 space-y-6"},U={class:"flex items-center justify-between"},B={class:"flex items-center justify-between"},T={class:"relative inline-flex items-center cursor-pointer"},D={class:"flex justify-end"},q=["disabled"],H={key:1,class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},R={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden"},$={class:"p-6 space-y-4"},L={class:"space-y-1"},G={class:"pt-4 flex space-x-3"},J=["disabled"],K=k({__name:"index",setup(O){const l=n({paymentSettings:{autoApprovalEnabled:!1,autoApprovalThreshold:0},twoFactorEnabled:!1}),c=n(!0),o=n(!1),i=n(!1),r=n(""),g=async()=>{try{c.value=!0;const a=await v.getSettings();l.value={paymentSettings:a.paymentSettings||{autoApprovalEnabled:!1,autoApprovalThreshold:0},twoFactorEnabled:a.twoFactorEnabled||!1}}catch(a){console.error("Failed to fetch settings",a)}finally{c.value=!1}},h=async()=>{var a,t;try{o.value=!0,await v.updateSettings(l.value),alert("Settings saved successfully")}catch(s){alert(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to save settings")}finally{o.value=!1}},w=async()=>{var a,t;if(r.value.length<4){alert("PIN must be at least 4 digits");return}try{o.value=!0,await v.updatePin(r.value),i.value=!1,r.value="",alert("PIN updated successfully")}catch(s){alert(((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to update PIN")}finally{o.value=!1}};return S(g),(a,t)=>(p(),d("div",C,[c.value?(p(),d("div",P,[...t[6]||(t[6]=[e("svg",{class:"animate-spin h-8 w-8 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):f("",!0),t[18]||(t[18]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Company Settings"),e("p",{class:"text-slate-500"},"Configure your company's approval rules and security.")],-1)),e("div",_,[e("div",E,[t[11]||(t[11]=e("h3",{class:"font-bold text-slate-900 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),m(" Approval Rules ")],-1)),e("div",N,[e("div",V,[t[8]||(t[8]=e("div",null,[e("p",{class:"font-medium text-slate-900"},"Auto-Approval"),e("p",{class:"text-sm text-slate-500"},"Automatically approve orders below a certain amount.")],-1)),e("label",j,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>l.value.paymentSettings.autoApprovalEnabled=s),class:"sr-only peer"},null,512),[[b,l.value.paymentSettings.autoApprovalEnabled]]),t[7]||(t[7]=e("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),l.value.paymentSettings.autoApprovalEnabled?(p(),d("div",F,[t[10]||(t[10]=e("span",{class:"text-sm text-slate-600 font-medium"},"Approval Limit:",-1)),e("div",M,[t[9]||(t[9]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"},"â‚¦",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>l.value.paymentSettings.autoApprovalThreshold=s),class:"pl-8 pr-4 py-2 border border-slate-200 rounded-lg w-32 focus:ring-2 focus:ring-primary-500 outline-none"},null,512),[[x,l.value.paymentSettings.autoApprovalThreshold]])])])):f("",!0)])]),e("div",I,[t[15]||(t[15]=e("h3",{class:"font-bold text-slate-900 flex items-center"},[e("svg",{class:"w-5 h-5 mr-2 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})]),m(" Security & PIN ")],-1)),e("div",z,[e("div",U,[t[12]||(t[12]=e("div",null,[e("p",{class:"font-medium text-slate-900"},"Approval PIN"),e("p",{class:"text-sm text-slate-500"},"Required for every manual order approval.")],-1)),e("button",{onClick:t[2]||(t[2]=s=>i.value=!0),class:"px-4 py-2 text-sm font-medium border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors"}," Change PIN ")]),e("div",B,[t[14]||(t[14]=e("div",null,[e("p",{class:"font-medium text-slate-900"},"Email 2FA"),e("p",{class:"text-sm text-slate-500"},"Enable two-factor authentication for high-value approvals.")],-1)),e("label",T,[u(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.twoFactorEnabled=s),class:"sr-only peer"},null,512),[[b,l.value.twoFactorEnabled]]),t[13]||(t[13]=e("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])])])])]),e("div",D,[e("button",{onClick:h,disabled:o.value,class:"px-8 py-3 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg shadow-primary-500/25 disabled:opacity-50"},A(o.value?"Saving...":"Save Changes"),9,q)]),i.value?(p(),d("div",H,[e("div",R,[t[17]||(t[17]=e("div",{class:"p-6 border-b border-slate-100"},[e("h3",{class:"text-xl font-bold text-slate-900"},"Update Approval PIN")],-1)),e("div",$,[e("div",L,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-slate-700"},"New 4-6 Digit PIN",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>r.value=s),type:"password",maxlength:"6",class:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-center text-2xl tracking-widest",autofocus:""},null,512),[[x,r.value]])]),e("div",G,[e("button",{onClick:t[5]||(t[5]=s=>i.value=!1),class:"flex-1 py-3 border border-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-50 transition-colors"},"Cancel"),e("button",{onClick:w,disabled:o.value,class:"flex-1 py-3 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all disabled:opacity-50"},"Update",8,J)])])])])):f("",!0)]))}});typeof y=="function"&&y(K);export{K as default};
