import{d as w,r as y,f as k,c as n,a as t,h as c,s as S,i as u,t as o,n as x,b as C,F as N,l as R,q as D,j as P,u as L,o as i,k as p}from"./index-C4KQTk6n.js";import{C as h}from"./catalog.service-DTry473v.js";import"./api-Csnh6SWI.js";const O={key:0},V={class:"flex justify-between items-center mb-6"},B={class:"flex space-x-3"},F={class:"bg-white shadow overflow-hidden sm:rounded-lg mb-6"},$={class:"px-4 py-5 sm:px-6 flex items-center"},j={class:"h-16 w-16 flex-shrink-0 mr-4"},q=["src"],T={class:"text-lg leading-6 font-medium text-gray-900"},A={class:"mt-1 max-w-2xl text-sm text-gray-500"},E={class:"ml-auto text-right"},I={class:"mt-1 text-lg font-bold text-gray-900"},M={class:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-6"},z={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"px-4 py-5 sm:p-6"},U={class:"mt-1 text-3xl font-semibold text-gray-900"},G={class:"bg-white overflow-hidden shadow rounded-lg"},H={class:"px-4 py-5 sm:p-6"},J={class:"mt-1 text-3xl font-semibold text-green-600"},Q={class:"bg-white overflow-hidden shadow rounded-lg"},W={class:"px-4 py-5 sm:p-6"},X={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-white divide-y divide-gray-200"},tt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ot={class:"px-6 py-4 whitespace-nowrap"},at={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},dt={key:0},rt={key:1,class:"text-center py-12"},ut=w({__name:"[id]",setup(lt){const f=D(),_=L(),s=y(null),d=y({}),b=async()=>{try{const r=f.params.id,[e,l]=await Promise.all([h.getProduct(r),h.getProductMetrics(r)]);s.value=e.data,d.value=l.data}catch(r){console.error("Failed to fetch product data",r)}};return k(()=>{b()}),(r,e)=>{var m;const l=P("router-link");return s.value?(i(),n("div",O,[t("div",V,[e[2]||(e[2]=t("h1",{class:"text-2xl font-semibold text-gray-900"}," Product Details ",-1)),t("div",B,[t("button",{onClick:e[0]||(e[0]=a=>S(_).back()),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50"}," Back "),c(l,{to:`/admin/catalog/products/${s.value._id}/edit`,class:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700"},{default:u(()=>[...e[1]||(e[1]=[p(" Edit Product ",-1)])]),_:1},8,["to"])])]),t("div",F,[t("div",$,[t("div",j,[t("img",{class:"h-16 w-16 rounded-md object-cover",src:s.value.images[0]||"https://via.placeholder.com/64",alt:""},null,8,q)]),t("div",null,[t("h3",T,o(s.value.title),1),t("p",A," SKU: "+o(s.value.sku)+" | Category: "+o((m=s.value.category)==null?void 0:m.name),1)]),t("div",E,[t("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.value.status==="active","bg-gray-100 text-gray-800":s.value.status==="inactive","bg-red-100 text-red-800":s.value.status==="discontinued"}])},o(s.value.status),3),t("div",I,o(s.value.currency)+" "+o(s.value.price.toFixed(2)),1)])])]),t("div",M,[t("div",z,[t("div",K,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Sold",-1)),t("dd",U,o(d.value.totalSold||0),1)])]),t("div",G,[t("div",H,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Revenue",-1)),t("dd",J,o(s.value.currency)+" "+o((d.value.totalRevenue||0).toLocaleString()),1)])]),t("div",Q,[t("div",W,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Current Stock",-1)),t("dd",{class:x(["mt-1 text-3xl font-semibold",s.value.inventory.quantity<=s.value.inventory.reorderLevel?"text-red-600":"text-gray-900"])},o(s.value.inventory.quantity)+" "+o(s.value.inventory.unit),3)])])]),t("div",X,[e[9]||(e[9]=t("div",{class:"px-4 py-5 sm:px-6"},[t("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Recent Orders ")],-1)),t("table",Y,[e[8]||(e[8]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order # "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",Z,[(i(!0),n(N,null,R(d.value.recentOrders,a=>{var g,v;return i(),n("tr",{key:a._id},[t("td",tt,[c(l,{to:`/admin/orders/${a._id}`},{default:u(()=>[p(o(a.orderNumber),1)]),_:2},1032,["to"])]),t("td",et,o((g=a.userId)==null?void 0:g.firstName)+" "+o((v=a.userId)==null?void 0:v.lastName),1),t("td",st,o(new Date(a.createdAt).toLocaleDateString()),1),t("td",ot,[t("span",{class:x(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":a.orderStatus==="delivered","bg-blue-100 text-blue-800":["processing","shipped"].includes(a.orderStatus),"bg-yellow-100 text-yellow-800":["pending","confirmed"].includes(a.orderStatus),"bg-gray-100 text-gray-800":a.orderStatus==="cancelled"}])},o(a.orderStatus),3)]),t("td",at,[c(l,{to:`/admin/orders/${a._id}`,class:"text-blue-600 hover:text-blue-900"},{default:u(()=>[...e[6]||(e[6]=[p(" View ",-1)])]),_:1},8,["to"])])])}),128)),!d.value.recentOrders||d.value.recentOrders.length===0?(i(),n("tr",dt,[...e[7]||(e[7]=[t("td",{colspan:"5",class:"px-6 py-4 text-center text-sm text-gray-500"}," No recent orders found for this product. ",-1)])])):C("",!0)])])])])):(i(),n("div",rt,[...e[10]||(e[10]=[t("p",{class:"text-gray-500"},"Loading product details...",-1)])]))}}});export{ut as default};
