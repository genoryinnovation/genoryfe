import{d as k,r as i,m as O,f as j,c as u,a as e,b as D,t as l,F,l as M,e as v,v as g,o as p,n as V}from"./index-C4KQTk6n.js";import{C as d}from"./catalog.service-DTry473v.js";import"./api-Csnh6SWI.js";const A={class:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-6"},E={class:"bg-white overflow-hidden shadow rounded-lg"},S={class:"px-4 py-5 sm:p-6"},B={class:"mt-1 text-3xl font-semibold text-gray-900"},N={class:"bg-white overflow-hidden shadow rounded-lg"},U={class:"px-4 py-5 sm:p-6"},z={class:"mt-1 text-3xl font-semibold text-green-600"},I={class:"bg-white overflow-hidden shadow rounded-lg"},R={class:"px-4 py-5 sm:p-6"},T={class:"mt-1 text-3xl font-semibold text-gray-500"},$={class:"bg-white shadow overflow-hidden sm:rounded-md"},L={role:"list",class:"divide-y divide-gray-200"},P={class:"px-4 py-4 sm:px-6 flex items-center justify-between"},q={class:"flex items-center"},G={class:"text-sm font-medium text-blue-600 truncate"},H={class:"ml-2 flex-shrink-0 flex"},J={class:"flex space-x-2"},K=["onClick"],Q=["onClick"],W={key:0,class:"fixed z-10 inset-0 overflow-y-auto"},X={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Y={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Z={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},ee={class:"text-lg leading-6 font-medium text-gray-900"},te={class:"mt-2 space-y-4"},ie=k({__name:"categories",setup(se){const f=i([]),n=i({}),r=i(!1),c=i(!1),m=i(null),s=O({name:"",description:"",displayOrder:0}),x=async()=>{try{const[o,t]=await Promise.all([d.getCategories(),d.getCategoryStats()]);f.value=o.data,n.value=t.data}catch(o){console.error("Failed to fetch categories",o)}},b=()=>{c.value=!1,m.value=null,s.name="",s.description="",s.displayOrder=0,r.value=!0},h=o=>{c.value=!0,m.value=o._id,s.name=o.name,s.description=o.description||"",s.displayOrder=o.displayOrder,r.value=!0},y=()=>{r.value=!1},_=async()=>{try{c.value&&m.value?await d.updateCategory(m.value,s):await d.createCategory(s),await x(),y()}catch(o){console.error("Failed to save category",o)}},w=async o=>{if(confirm("Are you sure?"))try{await d.deleteCategory(o),await x()}catch(t){console.error("Failed to delete category",t)}};return j(()=>{x()}),(o,t)=>(p(),u("div",null,[e("div",{class:"flex justify-between items-center mb-6"},[t[3]||(t[3]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Categories",-1)),e("button",{onClick:b,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"}," Add Category ")]),e("div",A,[e("div",E,[e("div",S,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Categories",-1)),e("dd",B,l(n.value.total||0),1)])]),e("div",N,[e("div",U,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active",-1)),e("dd",z,l(n.value.active||0),1)])]),e("div",I,[e("div",R,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Inactive",-1)),e("dd",T,l(n.value.inactive||0),1)])])]),e("div",$,[e("ul",L,[(p(!0),u(F,null,M(f.value,a=>(p(),u("li",{key:a._id},[e("div",P,[e("div",q,[e("div",G,l(a.name),1),e("div",H,[e("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",a.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(a.status),3)])]),e("div",J,[e("button",{onClick:C=>h(a),class:"text-gray-400 hover:text-gray-500"}," Edit ",8,K),e("button",{onClick:C=>w(a._id),class:"text-red-400 hover:text-red-500"}," Delete ",8,Q)])])]))),128))])]),r.value?(p(),u("div",W,[e("div",X,[t[7]||(t[7]=e("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),e("div",Y,[e("div",Z,[e("h3",ee,l(c.value?"Edit Category":"Add Category"),1),e("div",te,[v(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>s.name=a),type:"text",placeholder:"Category Name",class:"w-full border p-2 rounded"},null,512),[[g,s.name]]),v(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>s.description=a),type:"text",placeholder:"Description",class:"w-full border p-2 rounded"},null,512),[[g,s.description]]),v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>s.displayOrder=a),type:"number",placeholder:"Display Order",class:"w-full border p-2 rounded"},null,512),[[g,s.displayOrder,void 0,{number:!0}]])])]),e("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[e("button",{onClick:_,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 sm:ml-3 sm:w-auto sm:text-sm"}," Save "),e("button",{onClick:y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):D("",!0)]))}});export{ie as default};
