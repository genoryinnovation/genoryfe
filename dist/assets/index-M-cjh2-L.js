import{d as M,r as d,x as G,c as N,y as I,o as L,a,j as n,b as e,e as A,q as B,F as k,f as g,n as V,t as i,p as r,z as p,A as E,B as D,C as P}from"./index-CVDPA8xH.js";import{S as w}from"./system-config.service-CiHArr8g.js";import"./api-4GkiaaGr.js";const O={class:"space-y-6"},T={class:"flex items-center justify-between"},F={class:"flex space-x-2 border-b border-slate-200 overflow-x-auto pb-1"},J=["onClick"],R={class:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden"},z={key:0,class:"p-8 text-center text-slate-500"},$={key:1,class:"p-8 text-center text-slate-500"},q={key:2,class:"w-full text-left border-collapse"},K={class:"divide-y divide-slate-200"},H={class:"px-6 py-4"},Q={class:"font-mono text-sm font-medium text-slate-900"},W={class:"text-xs text-slate-500"},X={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-800 mt-1"},Y={key:0,class:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mt-1"},Z={class:"px-6 py-4"},ee={class:"max-w-md"},te={key:1,class:"text-xs bg-slate-100 p-2 rounded overflow-x-auto"},se={key:2,class:"text-sm text-slate-700 break-words"},le={class:"px-6 py-4 text-right space-x-2"},oe=["onClick"],ae=["onClick"],ne={key:0,class:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm"},re={class:"bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 space-y-4"},ie={class:"text-lg font-bold text-slate-900"},ue={class:"space-y-4"},de=["disabled"],pe={id:"group-suggestions"},xe=["value"],me={class:"flex items-center"},ve=M({__name:"index",setup(ce){const x=d([]),y=d(!0),u=d("GENERAL"),b=d(!1),c=d(!1),m=d(""),l=G({key:"",value:"",group:"GENERAL",type:"string",description:"",isPublic:!1}),v=N(()=>{const o=new Set(x.value.map(t=>t.group));return o.size===0?["GENERAL"]:Array.from(o).sort()}),h=N(()=>x.value.filter(o=>o.group===u.value));I(()=>l.type,o=>{o==="boolean"&&typeof l.value!="boolean"&&(l.value=!1),o==="number"&&typeof l.value!="number"&&(l.value=0)});const f=async()=>{y.value=!0;try{const o=await w.getAll();x.value=o.data,Array.isArray(o)?x.value=o:o&&o.data&&(x.value=o.data),!v.value.includes(u.value)&&v.value.length>0&&(u.value=v.value[0])}catch(o){console.error(o)}finally{y.value=!1}},_=o=>{o?(c.value=!0,l.key=o.key,l.group=o.group,l.type=o.type,l.description=o.description,l.isPublic=o.isPublic,l.value=o.value,o.type==="json"&&(m.value=JSON.stringify(o.value,null,2))):(c.value=!1,l.key="",l.group=u.value,l.type="string",l.value="",l.description="",l.isPublic=!1,m.value=""),b.value=!0},S=()=>{b.value=!1},j=async()=>{try{const o={...l};if(o.type==="json")try{o.value=JSON.parse(m.value)}catch{alert("Invalid JSON");return}await w.upsert(o),S(),f()}catch(o){console.error(o),alert("Failed to save")}},U=async o=>{if(confirm("Delete this setting?"))try{await w.delete(o),f()}catch(t){console.error(t)}};return L(()=>{f()}),(o,t)=>(n(),a("div",O,[e("div",T,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"System Settings"),e("p",{class:"mt-1 text-sm text-slate-500"},"Manage dynamic system configurations.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>_()),class:"flex items-center px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-xl transition-colors shadow-lg shadow-primary-500/30"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),B(" Add Setting ",-1)])])]),e("div",F,[(n(!0),a(k,null,g(v.value,s=>(n(),a("button",{key:s,onClick:C=>u.value=s,class:V(["px-4 py-2 text-sm font-medium rounded-t-lg transition-colors whitespace-nowrap",u.value===s?"bg-white text-primary-600 border-b-2 border-primary-600":"text-slate-500 hover:text-slate-700"])},i(s),11,J))),128))]),e("div",R,[y.value?(n(),a("div",z," Scanning configurations... ")):h.value.length===0?(n(),a("div",$," No settings found for this group. ")):(n(),a("table",q,[t[12]||(t[12]=e("thead",{class:"bg-slate-50 border-b border-slate-200"},[e("tr",null,[e("th",{class:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase"},"Key / Description"),e("th",{class:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase"},"Value"),e("th",{class:"px-6 py-4 text-xs font-semibold text-slate-500 uppercase text-right"},"Actions")])],-1)),e("tbody",K,[(n(!0),a(k,null,g(h.value,s=>(n(),a("tr",{key:s._id,class:"hover:bg-slate-50"},[e("td",H,[e("p",Q,i(s.key),1),e("p",W,i(s.description),1),e("span",X,i(s.type),1),s.isPublic?(n(),a("span",Y," Public ")):A("",!0)]),e("td",Z,[e("div",ee,[s.type==="boolean"?(n(),a("span",{key:0,class:V([s.value?"text-green-600":"text-red-600","font-medium"])},i(s.value?"TRUE":"FALSE"),3)):s.type==="json"?(n(),a("pre",te,i(JSON.stringify(s.value,null,2)),1)):(n(),a("span",se,i(s.value),1))])]),e("td",le,[e("button",{onClick:C=>_(s),class:"text-primary-600 hover:text-primary-800 text-sm font-medium"}," Edit ",8,oe),e("button",{onClick:C=>U(s.key),class:"text-rose-600 hover:text-rose-800 text-sm font-medium"}," Delete ",8,ae)])]))),128))])]))]),b.value?(n(),a("div",ne,[e("div",re,[e("h3",ie,i(c.value?"Edit Setting":"Add New Setting"),1),e("div",ue,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Key (Unique)",-1)),r(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>l.key=s),disabled:c.value,type:"text",class:"w-full px-3 py-2 border rounded-xl",placeholder:"e.g. PAGINATION_LIMIT"},null,8,de),[[p,l.key]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Group",-1)),r(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.group=s),type:"text",list:"group-suggestions",class:"w-full px-3 py-2 border rounded-xl",placeholder:"e.g. GENERAL"},null,512),[[p,l.group]]),e("datalist",pe,[(n(!0),a(k,null,g(v.value,s=>(n(),a("option",{key:s,value:s},null,8,xe))),128))])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Type",-1)),r(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.type=s),class:"w-full px-3 py-2 border rounded-xl"},[...t[15]||(t[15]=[e("option",{value:"string"},"String",-1),e("option",{value:"number"},"Number",-1),e("option",{value:"boolean"},"Boolean",-1),e("option",{value:"json"},"JSON",-1)])],512),[[E,l.type]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Value",-1)),l.type==="boolean"?r((n(),a("select",{key:0,"onUpdate:modelValue":t[4]||(t[4]=s=>l.value=s),class:"w-full px-3 py-2 border rounded-xl"},[...t[17]||(t[17]=[e("option",{value:!0},"True",-1),e("option",{value:!1},"False",-1)])],512)),[[E,l.value]]):l.type==="number"?r((n(),a("input",{key:1,"onUpdate:modelValue":t[5]||(t[5]=s=>l.value=s),type:"number",class:"w-full px-3 py-2 border rounded-xl"},null,512)),[[p,l.value,void 0,{number:!0}]]):l.type==="json"?r((n(),a("textarea",{key:2,"onUpdate:modelValue":t[6]||(t[6]=s=>m.value=s),rows:"4",class:"w-full px-3 py-2 border rounded-xl font-mono text-xs",placeholder:'{"key": "value"}'},null,512)),[[p,m.value]]):r((n(),a("input",{key:3,"onUpdate:modelValue":t[7]||(t[7]=s=>l.value=s),type:"text",class:"w-full px-3 py-2 border rounded-xl"},null,512)),[[p,l.value]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-sm font-medium text-slate-700 mb-1"},"Description",-1)),r(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l.description=s),type:"text",class:"w-full px-3 py-2 border rounded-xl"},null,512),[[p,l.description]])]),e("div",me,[r(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l.isPublic=s),type:"checkbox",id:"isPublic",class:"h-4 w-4 text-primary-600 rounded"},null,512),[[D,l.isPublic]]),t[20]||(t[20]=e("label",{for:"isPublic",class:"ml-2 text-sm text-slate-700"},"Is Public API Safe?",-1))])]),e("div",{class:"flex justify-end space-x-3 pt-4"},[e("button",{onClick:S,class:"px-4 py-2 text-slate-600 font-medium"},"Cancel"),e("button",{onClick:j,class:"px-4 py-2 bg-primary-600 text-white font-medium rounded-xl hover:bg-primary-700"},"Save")])])])):A("",!0)]))}});typeof P=="function"&&P(ve);export{ve as default};
