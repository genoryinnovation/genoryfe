import{d as O,r as i,f as D,c,a as e,t as o,e as _,v as P,p as T,g as V,F,l as A,j as I,o as u,h as w,i as S,k as x,n as k}from"./index-C4KQTk6n.js";import{O as C}from"./order.service-DFbBhsZg.js";import"./api-Csnh6SWI.js";const M={class:"grid grid-cols-1 gap-5 sm:grid-cols-4 mb-6"},$={class:"bg-white overflow-hidden shadow rounded-lg"},B={class:"px-4 py-5 sm:p-6"},L={class:"mt-1 text-3xl font-semibold text-gray-900"},R={class:"bg-white overflow-hidden shadow rounded-lg"},j={class:"px-4 py-5 sm:p-6"},z={class:"mt-1 text-3xl font-semibold text-yellow-600"},U={class:"bg-white overflow-hidden shadow rounded-lg"},E={class:"px-4 py-5 sm:p-6"},G={class:"mt-1 text-3xl font-semibold text-green-600"},q={class:"bg-white overflow-hidden shadow rounded-lg"},H={class:"px-4 py-5 sm:p-6"},J={class:"mt-1 text-3xl font-semibold text-blue-600"},K={class:"mb-6 flex gap-4"},Q={class:"bg-white shadow overflow-hidden sm:rounded-lg"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"text-xs text-gray-500"},te={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ae={class:"capitalize"},le={class:"px-6 py-4 whitespace-nowrap"},de={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ie={class:"mt-4 flex justify-between items-center"},ne={class:"text-sm text-gray-700"},re={class:"flex space-x-2"},pe=["disabled"],ce=["disabled"],ve=O({__name:"index",setup(ue){const g=i([]),d=i({}),r=i(""),p=i(""),a=i({page:1,limit:10,total:0,pages:1});let m;const n=async()=>{try{const[l,t]=await Promise.all([C.getOrders(a.value.page,a.value.limit,p.value,r.value),C.getOrderStats()]);g.value=l.data.orders,a.value=l.data.pagination,d.value=t.data}catch(l){console.error("Failed to fetch orders",l)}},N=()=>{clearTimeout(m),m=setTimeout(()=>{a.value.page=1,n()},300)},v=l=>{l>=1&&l<=a.value.pages&&(a.value.page=l,n())};return D(()=>{n()}),(l,t)=>{const y=I("router-link");return u(),c("div",null,[t[11]||(t[11]=e("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Orders",-1)),e("div",M,[e("div",$,[e("div",B,[t[4]||(t[4]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Orders",-1)),e("dd",L,o(d.value.total||0),1)])]),e("div",R,[e("div",j,[t[5]||(t[5]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending",-1)),e("dd",z,o(d.value.pending||0),1)])]),e("div",U,[e("div",E,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Delivered",-1)),e("dd",G,o(d.value.delivered||0),1)])]),e("div",q,[e("div",H,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Revenue",-1)),e("dd",J,"NGN "+o((d.value.revenue||0).toLocaleString()),1)])])]),e("div",K,[_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),onInput:N,type:"text",placeholder:"Search orders...",class:"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[P,r.value]]),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),onChange:n,class:"border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},[...t[8]||(t[8]=[V('<option value="">All Statuses</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="processing">Processing</option><option value="shipped">Shipped</option><option value="delivered">Delivered</option><option value="cancelled">Cancelled</option>',7)])],544),[[T,p.value]])]),e("div",Q,[e("table",W,[t[10]||(t[10]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Order # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Customer "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Total "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Payment "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",X,[(u(!0),c(F,null,A(g.value,s=>{var f,h,b;return u(),c("tr",{key:s._id},[e("td",Y,[w(y,{to:`/admin/orders/${s._id}`},{default:S(()=>[x(o(s.orderNumber),1)]),_:2},1032,["to"])]),e("td",Z,[x(o((f=s.userId)==null?void 0:f.firstName)+" "+o((h=s.userId)==null?void 0:h.lastName)+" ",1),e("div",ee,o((b=s.userId)==null?void 0:b.email),1)]),e("td",te,o(new Date(s.createdAt).toLocaleDateString()),1),e("td",se,o(s.currency)+" "+o(s.totalAmount.toFixed(2)),1),e("td",oe,[e("span",ae,o(s.paymentMethod),1),e("span",{class:k(["ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.paymentStatus==="paid","bg-yellow-100 text-yellow-800":s.paymentStatus==="pending","bg-red-100 text-red-800":s.paymentStatus==="failed"}])},o(s.paymentStatus),3)]),e("td",le,[e("span",{class:k(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.orderStatus==="delivered","bg-blue-100 text-blue-800":["processing","shipped"].includes(s.orderStatus),"bg-yellow-100 text-yellow-800":["pending","confirmed"].includes(s.orderStatus),"bg-gray-100 text-gray-800":s.orderStatus==="cancelled"}])},o(s.orderStatus),3)]),e("td",de,[w(y,{to:`/admin/orders/${s._id}`,class:"text-blue-600 hover:text-blue-900"},{default:S(()=>[...t[9]||(t[9]=[x(" View ",-1)])]),_:1},8,["to"])])])}),128))])])]),e("div",ie,[e("div",ne," Showing page "+o(a.value.page)+" of "+o(a.value.pages)+" ("+o(a.value.total)+" results) ",1),e("div",re,[e("button",{onClick:t[2]||(t[2]=s=>v(a.value.page-1)),disabled:a.value.page===1,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Previous ",8,pe),e("button",{onClick:t[3]||(t[3]=s=>v(a.value.page+1)),disabled:a.value.page===a.value.pages,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Next ",8,ce)])])])}}});export{ve as default};
