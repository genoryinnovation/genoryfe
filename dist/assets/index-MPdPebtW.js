import{d as ee,r as H,x as L,y as C,o as te,i as se,a as u,j as p,b as e,p as O,z as oe,A as F,g as re,e as N,q as g,n as k,F as V,f as B,t as m,h as ne,w as ae,C as R}from"./index-CVDPA8xH.js";import{a as ie}from"./api-4GkiaaGr.js";import{c as $,g as le}from"./_commonjsHelpers-Cpj98o6Y.js";function de(s){var n=typeof s;return s!=null&&(n=="object"||n=="function")}var X=de,ce=typeof $=="object"&&$&&$.Object===Object&&$,ue=ce,pe=ue,me=typeof self=="object"&&self&&self.Object===Object&&self,fe=pe||me||Function("return this")(),J=fe,xe=J,ge=function(){return xe.Date.now()},ve=ge,be=/\s/;function he(s){for(var n=s.length;n--&&be.test(s.charAt(n)););return n}var ye=he,we=ye,ke=/^\s+/;function _e(s){return s&&s.slice(0,we(s)+1).replace(ke,"")}var je=_e,Te=J,Se=Te.Symbol,K=Se,z=K,Q=Object.prototype,$e=Q.hasOwnProperty,Me=Q.toString,_=z?z.toStringTag:void 0;function Ce(s){var n=$e.call(s,_),l=s[_];try{s[_]=void 0;var r=!0}catch{}var a=Me.call(s);return r&&(n?s[_]=l:delete s[_]),a}var Oe=Ce,Ne=Object.prototype,Ve=Ne.toString;function Be(s){return Ve.call(s)}var Ee=Be,G=K,Ie=Oe,Ae=Ee,Pe="[object Null]",He="[object Undefined]",W=G?G.toStringTag:void 0;function Le(s){return s==null?s===void 0?He:Pe:W&&W in Object(s)?Ie(s):Ae(s)}var Fe=Le;function Re(s){return s!=null&&typeof s=="object"}var ze=Re,Ge=Fe,We=ze,De="[object Symbol]";function Ue(s){return typeof s=="symbol"||We(s)&&Ge(s)==De}var qe=Ue,Xe=je,D=X,Je=qe,U=NaN,Ke=/^[-+]0x[0-9a-f]+$/i,Qe=/^0b[01]+$/i,Ye=/^0o[0-7]+$/i,Ze=parseInt;function et(s){if(typeof s=="number")return s;if(Je(s))return U;if(D(s)){var n=typeof s.valueOf=="function"?s.valueOf():s;s=D(n)?n+"":n}if(typeof s!="string")return s===0?s:+s;s=Xe(s);var l=Qe.test(s);return l||Ye.test(s)?Ze(s.slice(2),l?2:8):Ke.test(s)?U:+s}var tt=et,st=X,E=ve,q=tt,ot="Expected a function",rt=Math.max,nt=Math.min;function at(s,n,l){var r,a,f,v,d,x,c=0,t=!1,h=!1,o=!0;if(typeof s!="function")throw new TypeError(ot);n=q(n)||0,st(l)&&(t=!!l.leading,h="maxWait"in l,f=h?rt(q(l.maxWait)||0,n):f,o="trailing"in l?!!l.trailing:o);function y(i){var b=r,w=a;return r=a=void 0,c=i,v=s.apply(w,b),v}function j(i){return c=i,d=setTimeout(S,n),t?y(i):v}function T(i){var b=i-x,w=i-c,P=n-b;return h?nt(P,f-w):P}function I(i){var b=i-x,w=i-c;return x===void 0||b>=n||b<0||h&&w>=f}function S(){var i=E();if(I(i))return A(i);d=setTimeout(S,T(i))}function A(i){return d=void 0,o&&r?y(i):(r=a=void 0,v)}function Y(){d!==void 0&&clearTimeout(d),c=0,r=x=a=d=void 0}function Z(){return d===void 0?v:A(E())}function M(){var i=E(),b=I(i);if(r=arguments,a=this,x=i,b){if(d===void 0)return j(x);if(h)return clearTimeout(d),d=setTimeout(S,n),y(x)}return d===void 0&&(d=setTimeout(S,n)),v}return M.cancel=Y,M.flush=Z,M}var it=at;const lt=le(it),dt={class:"space-y-6"},ct={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ut={class:"relative w-full sm:w-80"},pt={class:"flex flex-col sm:flex-row gap-4"},mt={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},ft={class:"overflow-x-auto"},xt={class:"min-w-full divide-y divide-slate-200"},gt={class:"bg-slate-50"},vt={class:"flex items-center"},bt=["d"],ht={class:"flex items-center"},yt=["d"],wt={class:"divide-y divide-slate-100"},kt={class:"px-6 py-4 whitespace-nowrap"},_t={class:"flex items-center"},jt={class:"flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-cyan-400 to-cyan-600 flex items-center justify-center text-white font-medium"},Tt={class:"ml-4"},St={class:"text-sm font-semibold text-slate-900"},$t={class:"text-xs text-slate-500"},Mt={class:"px-6 py-4 whitespace-nowrap"},Ct={class:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-slate-100 text-slate-700 capitalize"},Ot={class:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Nt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1-1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"},Vt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},Bt={class:"px-6 py-4 whitespace-nowrap"},Et={class:"px-6 py-4 whitespace-nowrap"},It={class:"flex items-center text-sm text-slate-600"},At={key:0},Pt={key:1,class:"text-slate-400"},Ht={key:0,class:"text-xs text-slate-500 ml-6"},Lt={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"text-sm font-semibold text-emerald-600"},Rt={class:"px-6 py-4 whitespace-nowrap text-right"},zt={key:0,class:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex items-center justify-between"},Gt={class:"text-sm text-slate-500"},Wt={class:"font-medium text-slate-900"},Dt={class:"font-medium text-slate-900"},Ut={class:"font-medium text-slate-900"},qt={class:"flex items-center space-x-2"},Xt=["disabled"],Jt={class:"flex items-center space-x-1"},Kt=["onClick"],Qt=["disabled"],Yt={key:1,class:"text-center py-12"},Zt=ee({__name:"index",setup(s){const n=H([]),l=H(!0),r=L({status:"",type:"",search:"",sort:"createdAt",order:"desc",page:1,limit:10}),a=L({total:0,page:1,limit:10,pages:1}),f=async()=>{l.value=!0;try{const c=await ie.get("/admin/delivery-partners",{params:r});n.value=c.data.data.partners,Object.assign(a,c.data.data.pagination)}catch(c){console.error("Failed to fetch partners",c)}finally{l.value=!1}},v=lt(()=>{r.page=1,f()},500),d=c=>{r.page=c,f()},x=c=>{r.sort===c?r.order=r.order==="asc"?"desc":"asc":(r.sort=c,r.order="asc"),r.page=1,f()};return C(()=>r.status,()=>{r.page=1,f()}),C(()=>r.type,()=>{r.page=1,f()}),C(()=>r.search,v),te(()=>{f()}),(c,t)=>{const h=se("router-link");return p(),u("div",dt,[e("div",ct,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Delivery Partners"),e("p",{class:"mt-1 text-sm text-slate-500"},"Manage your delivery fleet and track performance")],-1)),e("div",ut,[O(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>r.search=o),type:"text",placeholder:"Search name or email...",class:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all shadow-sm"},null,512),[[oe,r.search]]),t[7]||(t[7]=e("svg",{class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),e("div",pt,[O(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>r.status=o),class:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all min-w-[160px] shadow-sm"},[...t[9]||(t[9]=[re('<option value="">All Status</option><option value="pending">Pending</option><option value="approved">Approved</option><option value="rejected">Rejected</option><option value="suspended">Suspended</option>',5)])],512),[[F,r.status]]),O(e("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>r.type=o),class:"px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all min-w-[160px] shadow-sm"},[...t[10]||(t[10]=[e("option",{value:""},"All Types",-1),e("option",{value:"rider"},"Rider",-1),e("option",{value:"errander"},"Errander",-1)])],512),[[F,r.type]])]),e("div",mt,[e("div",ft,[e("table",xt,[e("thead",null,[e("tr",gt,[e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer group",onClick:t[3]||(t[3]=o=>x("firstName"))},[e("div",vt,[t[11]||(t[11]=g(" Partner ",-1)),(p(),u("svg",{class:k(["w-3 h-3 ml-1 transition-colors",r.sort==="firstName"?"text-primary-500":"text-slate-300 group-hover:text-slate-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:r.order==="desc"?"M19 9l-7 7-7-7":"M5 15l7-7 7 7","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,8,bt)],2))])]),t[13]||(t[13]=e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Type ",-1)),t[14]||(t[14]=e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Status ",-1)),t[15]||(t[15]=e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Vehicle ",-1)),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider cursor-pointer group",onClick:t[4]||(t[4]=o=>x("partner.earnings.total"))},[e("div",ht,[t[12]||(t[12]=g(" Earnings ",-1)),(p(),u("svg",{class:k(["w-3 h-3 ml-1 transition-colors",r.sort==="partner.earnings.total"?"text-primary-500":"text-slate-300 group-hover:text-slate-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:r.order==="desc"?"M19 9l-7 7-7-7":"M5 15l7-7 7 7","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},null,8,yt)],2))])]),t[16]||(t[16]=e("th",{scope:"col",class:"relative px-6 py-4"},[e("span",{class:"sr-only"},"Actions")],-1))])]),e("tbody",wt,[l.value?(p(),u(V,{key:0},B(5,o=>e("tr",{key:o},[...t[17]||(t[17]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"animate-pulse flex space-x-4"},[e("div",{class:"rounded-full bg-slate-200 h-10 w-10"}),e("div",{class:"flex-1 space-y-4 py-1"},[e("div",{class:"h-4 bg-slate-200 rounded w-3/4"}),e("div",{class:"h-4 bg-slate-200 rounded w-1/2"})])])],-1)])])),64)):(p(!0),u(V,{key:1},B(n.value,o=>{var y,j,T;return p(),u("tr",{key:o._id,class:"hover:bg-slate-50/50 transition-colors"},[e("td",kt,[e("div",_t,[e("div",jt,m(((y=o.user.firstName)==null?void 0:y.charAt(0))||"P"),1),e("div",Tt,[e("div",St,m(o.user.firstName)+" "+m(o.user.lastName),1),e("div",$t,m(o.user.email),1)])])]),e("td",Mt,[e("span",Ct,[(p(),u("svg",Ot,[o.type==="rider"?(p(),u("path",Nt)):(p(),u("path",Vt))])),g(" "+m(o.type||"N/A"),1)])]),e("td",Bt,[e("span",{class:k(["inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold",{"bg-emerald-100 text-emerald-700":o.status==="approved","bg-amber-100 text-amber-700":o.status==="pending","bg-rose-100 text-rose-700":o.status==="rejected","bg-slate-100 text-slate-600":o.status==="suspended"}])},[e("span",{class:k(["w-1.5 h-1.5 rounded-full mr-1.5",{"bg-emerald-500":o.status==="approved","bg-amber-500":o.status==="pending","bg-rose-500":o.status==="rejected","bg-slate-400":o.status==="suspended"}])},null,2),g(" "+m(o.status),1)],2)]),e("td",Et,[e("div",It,[t[18]||(t[18]=e("svg",{class:"w-4 h-4 mr-2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})],-1)),o.vehicle?(p(),u("span",At,m(o.vehicle.make)+" "+m(o.vehicle.model),1)):(p(),u("span",Pt,"No vehicle"))]),o.vehicle?(p(),u("div",Ht,m(o.vehicle.plateNumber),1)):N("",!0)]),e("td",Lt,[e("div",Ft,"â‚¦"+m(((T=(j=o.earnings)==null?void 0:j.total)==null?void 0:T.toLocaleString())||0),1),t[19]||(t[19]=e("div",{class:"text-xs text-slate-500"},"Total earnings",-1))]),e("td",Rt,[ne(h,{to:`/admin/delivery-partners/${o._id}`,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"},{default:ae(()=>[...t[20]||(t[20]=[g(" View ",-1),e("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])])])}),128))])])]),a.pages>1?(p(),u("div",zt,[e("div",Gt,[t[21]||(t[21]=g(" Showing ",-1)),e("span",Wt,m((a.page-1)*a.limit+1),1),t[22]||(t[22]=g(" to ",-1)),e("span",Dt,m(Math.min(a.page*a.limit,a.total)),1),t[23]||(t[23]=g(" of ",-1)),e("span",Ut,m(a.total),1),t[24]||(t[24]=g(" partners ",-1))]),e("div",qt,[e("button",{onClick:t[5]||(t[5]=o=>d(a.page-1)),disabled:a.page===1,class:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[25]||(t[25]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])],8,Xt),e("div",Jt,[(p(!0),u(V,null,B(a.pages,o=>(p(),u("button",{key:o,onClick:y=>d(o),class:k(["px-3.5 py-1.5 rounded-lg text-sm font-medium transition-colors",a.page===o?"bg-primary-500 text-white shadow-sm":"text-slate-600 hover:bg-slate-100"])},m(o),11,Kt))),128))]),e("button",{onClick:t[6]||(t[6]=o=>d(a.page+1)),disabled:a.page===a.pages,class:"p-2 rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[26]||(t[26]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Qt)])])):N("",!0),!l.value&&n.value.length===0?(p(),u("div",Yt,[...t[27]||(t[27]=[e("svg",{class:"mx-auto h-12 w-12 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 011-1h2.586a1 1 0 01.707.293l3.414 3.414a1 1 0 01.293.707V16a1 1 0 01-1 1h-1m-6-1a1 1 0 001 1h1M5 17a2 2 0 104 0m-4 0a2 2 0 114 0m6 0a2 2 0 104 0m-4 0a2 2 0 114 0"})],-1),e("h3",{class:"mt-4 text-sm font-medium text-slate-900"},"No delivery partners found",-1),e("p",{class:"mt-1 text-sm text-slate-500"},"Try adjusting your filter or search criteria.",-1)])])):N("",!0)])])}}});typeof R=="function"&&R(Zt);export{Zt as default};
