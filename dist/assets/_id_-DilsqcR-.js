import{d as S,k as T,r as p,o as B,i as z,a as o,j as l,b as e,h as C,w as j,e as v,n as M,t as a,F as A,f as F,q as f,C as D}from"./index-CVDPA8xH.js";import{P as b}from"./partner-portal.service-D36OMrJc.js";import"./api-4GkiaaGr.js";const L={class:"space-y-6"},P={class:"flex justify-between items-center"},V={class:"flex items-center space-x-4"},I={class:"flex items-center space-x-3"},H=["disabled"],E={key:0,class:"flex flex-col items-center justify-center py-24 bg-white rounded-3xl border border-slate-200 shadow-sm"},R={key:1,class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},q={class:"space-y-6"},O={class:"bg-white p-8 rounded-3xl border border-slate-200 shadow-sm text-center"},Q={class:"w-24 h-24 bg-slate-100 rounded-full flex items-center justify-center font-black text-slate-400 text-3xl mx-auto mb-6"},$={class:"text-2xl font-black text-slate-900 italic tracking-tight"},G={class:"text-slate-500 font-medium"},J={class:"mt-6 pt-6 border-t border-slate-100 space-y-4"},K={class:"flex justify-between items-center text-sm"},U={class:"px-3 py-1 bg-slate-100 text-slate-600 font-bold rounded-lg uppercase text-[10px]"},W={class:"flex justify-between items-center text-sm"},X={class:"flex justify-between items-center text-sm"},Y={class:"text-slate-700 font-bold"},Z={class:"bg-slate-900 p-8 rounded-3xl text-white overflow-hidden relative group"},ee={class:"relative z-10"},te={class:"grid grid-cols-2 gap-4"},se={class:"text-2xl font-black italic"},ae={class:"lg:col-span-2"},oe={class:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden min-h-[500px]"},le={class:"divide-y divide-slate-50"},re={key:0,class:"p-12 text-center text-slate-400"},ie={class:"flex-1 min-w-0"},ne={class:"flex justify-between items-start"},de={class:"text-slate-900 font-bold group-hover:text-primary-600 transition-colors capitalize"},ce={class:"text-[10px] font-bold text-slate-400 uppercase tracking-tighter bg-slate-100 px-2 py-1 rounded"},ue={class:"text-xs text-slate-500 mt-1"},pe={class:"text-slate-700 font-medium"},me={class:"text-slate-700 font-medium"},xe={key:2,class:"py-24 text-center bg-rose-50 rounded-3xl border border-rose-100"},ve=S({__name:"[id]",setup(fe){const m=T().params.id,s=p(null),c=p([]),x=p(!0),u=p(!1),g=async()=>{try{x.value=!0;const[r,t]=await Promise.all([b.getTeamMemberDetails(m),b.getTeamMemberActivity(m)]);s.value=r,c.value=t}catch(r){console.error("Failed to fetch team member data",r)}finally{x.value=!1}},N=async()=>{var t,n;const r=s.value.status==="suspended"?"activate":"suspend";if(confirm(`Are you sure you want to ${r} this staff member?`))try{u.value=!0,await b.toggleTeamMemberSuspension(m),await g()}catch(d){console.error("Failed to toggle suspension",d),alert(((n=(t=d.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to update status")}finally{u.value=!1}};return B(g),(r,t)=>{var d,h,y,_,w,k;const n=z("router-link");return l(),o("div",L,[e("div",P,[e("div",V,[C(n,{to:"/partner/team",class:"p-2 bg-white border border-slate-200 rounded-xl text-slate-400 hover:text-slate-600 hover:bg-slate-50 transition-all"},{default:j(()=>[...t[0]||(t[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),_:1}),t[1]||(t[1]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Team Member Profile"),e("p",{class:"text-slate-500 text-sm"},"View details and activity for this staff member.")],-1))]),e("div",I,[((d=s.value)==null?void 0:d.status)!=="revoked"&&((y=(h=s.value)==null?void 0:h.role)==null?void 0:y.key)!=="partner"?(l(),o("button",{key:0,onClick:N,disabled:u.value,class:M(["px-6 py-2 rounded-xl font-bold transition-all shadow-lg",((_=s.value)==null?void 0:_.status)==="suspended"?"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-500/25":"bg-amber-500 text-white hover:bg-amber-600 shadow-amber-500/25"])},a(u.value?"Processing...":((w=s.value)==null?void 0:w.status)==="suspended"?"Activate Admin":"Suspend Admin"),11,H)):v("",!0)])]),x.value?(l(),o("div",E,[...t[2]||(t[2]=[e("svg",{class:"animate-spin h-12 w-12 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-slate-400 font-medium"},"Loading profile...",-1)])])):s.value?(l(),o("div",R,[e("div",q,[e("div",O,[e("div",Q,a(s.value.firstName[0])+a(s.value.lastName[0]),1),e("h2",$,a(s.value.firstName)+" "+a(s.value.lastName),1),e("p",G,a(s.value.email),1),e("div",J,[e("div",K,[t[3]||(t[3]=e("span",{class:"text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Role",-1)),e("span",U,a(((k=s.value.role)==null?void 0:k.name)||"Staff"),1)]),e("div",W,[t[4]||(t[4]=e("span",{class:"text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Status",-1)),e("span",{class:M(["px-3 py-1 font-bold rounded-lg uppercase text-[10px]",s.value.status==="active"?"bg-emerald-50 text-emerald-600":s.value.status==="pending"?"bg-amber-50 text-amber-600":s.value.status==="suspended"?"bg-rose-50 text-rose-600":"bg-slate-50 text-slate-600"])},a(s.value.status),3)]),e("div",X,[t[5]||(t[5]=e("span",{class:"text-slate-400 font-bold uppercase tracking-wider text-[10px]"},"Added",-1)),e("span",Y,a(new Date(s.value.createdAt).toLocaleDateString()),1)])])]),e("div",Z,[e("div",ee,[t[7]||(t[7]=e("h3",{class:"text-sm font-bold uppercase tracking-widest text-slate-400 mb-4 italic"},"Quick Overview",-1)),e("div",te,[e("div",null,[e("p",se,a(c.value.length),1),t[6]||(t[6]=e("p",{class:"text-[10px] text-slate-400 font-bold uppercase tracking-tighter"},"Logs Found",-1))])])]),t[8]||(t[8]=e("div",{class:"absolute -right-4 -bottom-4 w-24 h-24 bg-primary-500/10 rounded-full blur-3xl group-hover:scale-150 transition-transform duration-700"},null,-1))])]),e("div",ae,[e("div",oe,[t[12]||(t[12]=e("div",{class:"p-8 border-b border-slate-100 flex justify-between items-center"},[e("h3",{class:"text-xl font-black text-slate-900 italic tracking-tight"},"Activity History")],-1)),e("div",le,[c.value.length===0?(l(),o("div",re," No activity logs found for this member. ")):v("",!0),(l(!0),o(A,null,F(c.value,i=>(l(),o("div",{key:i._id,class:"p-6 hover:bg-slate-50/50 transition-colors flex items-start space-x-4"},[t[11]||(t[11]=e("div",{class:"w-10 h-10 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400 flex-shrink-0 border border-slate-100"},[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A10.003 10.003 0 0012 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",ie,[e("div",ne,[e("p",de,a(i.action.replace(/_/g," ").toLowerCase()),1),e("span",ce,a(new Date(i.createdAt).toLocaleString()),1)]),e("p",ue,[t[10]||(t[10]=f(" Entity: ",-1)),e("span",pe,a(i.entityType),1),i.entityId?(l(),o(A,{key:0},[t[9]||(t[9]=f(" | ID: ",-1)),e("span",me,a(i.entityId),1)],64)):v("",!0)])])]))),128))])])])])):(l(),o("div",xe,[t[14]||(t[14]=e("p",{class:"text-rose-600 font-bold"},"Team member not found or access denied.",-1)),C(n,{to:"/partner/team",class:"mt-4 inline-block text-primary-600 font-bold underline"},{default:j(()=>[...t[13]||(t[13]=[f("Back to Team",-1)])]),_:1})]))])}}});typeof D=="function"&&D(ve);export{ve as default};
