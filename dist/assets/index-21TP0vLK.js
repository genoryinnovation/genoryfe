import{d as w,r as d,o as k,a,j as o,b as e,e as x,F as _,f as N,t as r,B as M,s as f,v as m,y}from"./index-5jFCLG0b.js";import{P as h}from"./partner-portal.service-BUr-YCxR.js";import"./api-Cc7xRAfh.js";const C={class:"space-y-6"},j={class:"flex justify-between items-center"},z={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden relative min-h-[400px]"},B={key:0,class:"absolute inset-0 bg-white/50 backdrop-blur-[2px] flex items-center justify-center z-10 transition-all"},S={class:"w-full text-left"},V={class:"divide-y divide-slate-100"},A={key:0},I={class:"px-6 py-4"},T={class:"flex items-center space-x-3"},D={class:"w-9 h-9 bg-slate-100 rounded-full flex items-center justify-center font-bold text-slate-500 text-xs"},F={class:"font-bold text-slate-900"},P={class:"text-xs text-slate-500"},L={class:"px-6 py-4"},q={class:"text-xs font-medium px-2 py-1 bg-slate-100 text-slate-600 rounded-md uppercase tracking-wider"},U={class:"px-6 py-4 text-right"},$={class:"text-xs font-medium text-slate-500"},E={key:0,class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},H={class:"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200"},J={class:"p-8 border-b border-slate-100 flex justify-between items-center"},R={class:"grid grid-cols-2 gap-4"},W={class:"space-y-1"},G={class:"space-y-1"},K={class:"space-y-1"},O={class:"pt-4 flex space-x-3"},Q=["disabled"],X={key:0},Y={key:1,class:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Z=w({__name:"index",setup(ee){const p=d([]),c=d(!0),u=d(!1),n=d(!1),l=d({firstName:"",lastName:"",email:""}),b=async()=>{try{c.value=!0;const i=await h.getTeam();p.value=i}catch(i){console.error("Failed to fetch team",i)}finally{c.value=!1}},g=async()=>{var i,t;try{u.value=!0,await h.inviteTeamMember(l.value),l.value={firstName:"",lastName:"",email:""},n.value=!1,await b(),alert("Team member invited successfully")}catch(s){alert(((t=(i=s.response)==null?void 0:i.data)==null?void 0:t.message)||"Failed to invite team member")}finally{u.value=!1}};return k(b),(i,t)=>(o(),a("div",C,[e("div",j,[t[6]||(t[6]=e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Portal Access (Team)"),e("p",{class:"text-slate-500"},"Manage who has access to your company's partner portal.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>n.value=!0),class:"px-6 py-2 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg shadow-primary-500/25"}," Invite Member ")]),e("div",z,[c.value?(o(),a("div",B,[...t[7]||(t[7]=[e("svg",{class:"animate-spin h-10 w-10 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):x("",!0),e("table",S,[t[10]||(t[10]=e("thead",null,[e("tr",{class:"bg-slate-50 border-b border-slate-100"},[e("th",{class:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Member"),e("th",{class:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-4 text-xs font-bold text-slate-500 uppercase tracking-wider text-right"},"Added")])],-1)),e("tbody",V,[p.value.length===0&&!c.value?(o(),a("tr",A,[...t[8]||(t[8]=[e("td",{colspan:"4",class:"px-6 py-12 text-center text-slate-400"}," No team members found. Invite your first team member! ",-1)])])):x("",!0),(o(!0),a(_,null,N(p.value,s=>{var v;return o(),a("tr",{key:s._id,class:"hover:bg-slate-50/50 transition-colors group"},[e("td",I,[e("div",T,[e("div",D,r(s.firstName[0])+r(s.lastName[0]),1),e("div",null,[e("p",F,r(s.firstName)+" "+r(s.lastName),1),e("p",P,r(s.email),1)])])]),e("td",L,[e("span",q,r(((v=s.role)==null?void 0:v.name)||"Staff"),1)]),t[9]||(t[9]=e("td",{class:"px-6 py-4"},[e("span",{class:"flex items-center space-x-1 time-full"},[e("span",{class:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),e("span",{class:"text-xs font-medium text-emerald-600"},"Active")])],-1)),e("td",U,[e("p",$,r(new Date(s.createdAt).toLocaleDateString()),1)])])}),128))])])]),n.value?(o(),a("div",E,[e("div",H,[e("div",J,[t[12]||(t[12]=e("div",null,[e("h3",{class:"text-2xl font-black text-slate-900 italic"},"Invite Member"),e("p",{class:"text-slate-500 text-sm mt-1"},"Provide access to the portal for a staff member.")],-1)),e("button",{onClick:t[1]||(t[1]=s=>n.value=!1),class:"p-2 text-slate-400 hover:text-slate-600 transition-colors"},[...t[11]||(t[11]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:M(g,["prevent"]),class:"p-8 space-y-6"},[e("div",R,[e("div",W,[t[13]||(t[13]=e("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest pl-1"},"First Name",-1)),f(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.firstName=s),type:"text",required:"",placeholder:"John",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-primary-500 outline-none transition-all"},null,512),[[m,l.value.firstName]])]),e("div",G,[t[14]||(t[14]=e("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest pl-1"},"Last Name",-1)),f(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.lastName=s),type:"text",required:"",placeholder:"Doe",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-primary-500 outline-none transition-all"},null,512),[[m,l.value.lastName]])])]),e("div",K,[t[15]||(t[15]=e("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest pl-1"},"Work Email",-1)),f(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.value.email=s),type:"email",required:"",placeholder:"john.doe@company.com",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-primary-500 outline-none transition-all"},null,512),[[m,l.value.email]])]),e("div",O,[e("button",{type:"button",onClick:t[5]||(t[5]=s=>n.value=!1),class:"flex-1 py-4 border border-slate-200 text-slate-700 font-bold rounded-2xl hover:bg-slate-50 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:u.value,class:"flex-1 py-4 bg-slate-900 text-white font-bold rounded-2xl hover:bg-slate-800 transition-all shadow-xl shadow-slate-900/20 flex items-center justify-center space-x-2 disabled:opacity-50"},[u.value?(o(),a("svg",Y,[...t[16]||(t[16]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),a("span",X,"Send Invitation"))],8,Q)])],32)])])):x("",!0)]))}});typeof y=="function"&&y(Z);export{Z as default};
