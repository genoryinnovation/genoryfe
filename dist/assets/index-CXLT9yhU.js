import{d as z,r as u,o as U,a as c,j as b,e as g,b as t,n as w,t as n,g as m,p as i,z as v,B as V,F as I,f as O,C as B}from"./index-CVDPA8xH.js";import{P as k}from"./partner-portal.service-D36OMrJc.js";import"./api-4GkiaaGr.js";const R={class:"max-w-4xl space-y-8 relative"},$={key:0,class:"absolute inset-0 bg-white/50 backdrop-blur-[2px] flex items-center justify-center z-10 rounded-xl"},q={class:"space-y-6"},W={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},G={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},J={class:"space-y-1"},K={class:"space-y-1"},Q={class:"space-y-1 md:col-span-2"},X={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},Y={class:"p-6 space-y-8"},Z={class:"flex items-center justify-between"},ee={class:"relative inline-flex items-center cursor-pointer"},te={key:0,class:"flex items-center space-x-4 p-4 bg-slate-50 rounded-2xl animate-in fade-in slide-in-from-top-2 border border-slate-100"},se={class:"relative"},le={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},ae={class:"p-6 grid grid-cols-1 md:grid-cols-3 gap-6"},oe={class:"bg-slate-50 p-4 rounded-xl border border-slate-100"},re={class:"text-xl font-black text-slate-900"},ne={class:"bg-slate-50 p-4 rounded-xl border border-slate-100"},ie={class:"text-xl font-black text-slate-900"},de={class:"bg-slate-50 p-4 rounded-xl border border-slate-100"},pe={class:"text-xl font-black text-emerald-600"},ue={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},ce={class:"p-6 grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},ve={class:"text-xl font-black text-slate-900 capitalize"},xe={class:"p-4 bg-slate-50 rounded-xl border border-slate-100"},me={class:"text-xl font-black text-slate-900"},fe={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},ge={class:"p-6 space-y-6"},ye={class:"grid grid-cols-2 gap-6"},he={class:"space-y-1"},we={class:"space-y-1"},ke={class:"space-y-2"},Se={class:"flex flex-wrap gap-2"},Ce=["onClick"],_e={class:"bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"},Ae={class:"p-6 space-y-6"},Pe={class:"flex items-center justify-between"},Le={class:"flex items-center justify-between pt-4 border-t border-slate-50"},He={class:"relative inline-flex items-center cursor-pointer"},Me={class:"flex justify-end"},Ne=["disabled"],Ve={key:2,class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},Be={class:"bg-white rounded-2xl shadow-xl w-full max-w-sm overflow-hidden"},Te={class:"p-6 border-b border-slate-100 text-center"},De={class:"p-6 space-y-4"},Ee={class:"space-y-1"},je={class:"pt-4 flex space-x-3"},Fe=["disabled"],ze=z({__name:"index",setup(Ue){const l=u({name:"",industry:"",registrationNumber:"",paymentSettings:{autoApprovalEnabled:!1,autoApprovalThreshold:0,approvalHours:{start:"08:00",end:"17:00",days:[1,2,3,4,5]},dailyLimit:0,monthlyLimit:0,negativeBalanceLimit:0},planType:"prepaid",billingCycleSettings:{billingDay:"last",gracePeriodDays:5},twoFactorEnabled:!1}),y=u(!0),d=u(!1),x=u(!1),f=u(""),o=u(""),p=u("success"),T=[{value:0,label:"Sun"},{value:1,label:"Mon"},{value:2,label:"Tue"},{value:3,label:"Wed"},{value:4,label:"Thu"},{value:5,label:"Fri"},{value:6,label:"Sat"}],D=r=>{const e=l.value.paymentSettings.approvalHours.days.indexOf(r);e===-1?l.value.paymentSettings.approvalHours.days.push(r):l.value.paymentSettings.approvalHours.days.splice(e,1)},E=async()=>{var r,e,s,h,S,C,_,A,P,L,H,M,N;try{y.value=!0;const a=await k.getSettings();l.value={name:a.name||"",industry:a.industry||"",registrationNumber:a.registrationNumber||"",paymentSettings:{autoApprovalEnabled:((r=a.paymentSettings)==null?void 0:r.autoApprovalEnabled)||!1,autoApprovalThreshold:((e=a.paymentSettings)==null?void 0:e.autoApprovalThreshold)||0,approvalHours:{start:((h=(s=a.paymentSettings)==null?void 0:s.approvalHours)==null?void 0:h.start)||"08:00",end:((C=(S=a.paymentSettings)==null?void 0:S.approvalHours)==null?void 0:C.end)||"17:00",days:((A=(_=a.paymentSettings)==null?void 0:_.approvalHours)==null?void 0:A.days)||[1,2,3,4,5]},dailyLimit:((P=a.paymentSettings)==null?void 0:P.dailyLimit)||0,monthlyLimit:((L=a.paymentSettings)==null?void 0:L.monthlyLimit)||0,negativeBalanceLimit:((H=a.paymentSettings)==null?void 0:H.negativeBalanceLimit)||0},planType:a.planType||"prepaid",billingCycleSettings:{billingDay:((M=a.billingCycleSettings)==null?void 0:M.billingDay)||"last",gracePeriodDays:((N=a.billingCycleSettings)==null?void 0:N.gracePeriodDays)||5},twoFactorEnabled:a.twoFactorEnabled||!1}}catch(a){console.error("Failed to fetch settings",a)}finally{y.value=!1}},j=async()=>{var r,e;try{o.value="",d.value=!0,await k.updateSettings(l.value),o.value="Settings saved successfully",p.value="success",setTimeout(()=>{o.value=""},3e3)}catch(s){console.error("Failed to save settings",s),o.value=((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to save settings",p.value="error"}finally{d.value=!1}},F=async()=>{var r,e;if(f.value.length<4){o.value="PIN must be at least 4 digits",p.value="error";return}try{o.value="",d.value=!0,await k.updatePin(f.value),o.value="PIN updated successfully",p.value="success",setTimeout(()=>{x.value=!1,o.value="",f.value=""},1500)}catch(s){console.error("Failed to update PIN",s),o.value=((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"Failed to update PIN",p.value="error"}finally{d.value=!1}};return U(E),(r,e)=>(b(),c("div",R,[y.value?(b(),c("div",$,[...e[11]||(e[11]=[t("svg",{class:"animate-spin h-8 w-8 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):g("",!0),e[38]||(e[38]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Company Settings"),t("p",{class:"text-slate-500"},"Configure your company's approval rules and security.")],-1)),o.value&&!x.value?(b(),c("div",{key:1,class:w(["p-4 rounded-xl border font-bold text-sm animate-in fade-in slide-in-from-top-4 duration-300",p.value==="success"?"bg-emerald-50 border-emerald-100 text-emerald-600":"bg-rose-50 border-rose-100 text-rose-600"])},n(o.value),3)):g("",!0),t("div",q,[t("div",W,[e[15]||(e[15]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50"><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg> Company Identity </h3><p class="text-xs text-slate-500 mt-1">Manage your public company information.</p></div>',1)),t("div",G,[t("div",J,[e[12]||(e[12]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Company Name",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.name=s),type:"text",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-sm"},null,512),[[v,l.value.name]])]),t("div",K,[e[13]||(e[13]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Industry",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.industry=s),type:"text",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-sm"},null,512),[[v,l.value.industry]])]),t("div",Q,[e[14]||(e[14]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Registration Number",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.registrationNumber=s),type:"text",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-sm",placeholder:"RC-1234567"},null,512),[[v,l.value.registrationNumber]])])])]),t("div",X,[e[20]||(e[20]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50"><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Approval Policy </h3><p class="text-xs text-slate-500 mt-1">Define how orders are reviewed and approved.</p></div>',1)),t("div",Y,[t("div",Z,[e[17]||(e[17]=t("div",null,[t("p",{class:"font-bold text-slate-900"},"Auto-Approval"),t("p",{class:"text-xs text-slate-500"},"Automatically approve orders below a certain amount.")],-1)),t("label",ee,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.paymentSettings.autoApprovalEnabled=s),class:"sr-only peer"},null,512),[[V,l.value.paymentSettings.autoApprovalEnabled]]),e[16]||(e[16]=t("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])]),l.value.paymentSettings.autoApprovalEnabled?(b(),c("div",te,[e[19]||(e[19]=t("span",{class:"text-sm text-slate-600 font-bold"},"Limit per order:",-1)),t("div",se,[e[18]||(e[18]=t("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 font-bold"},"₦",-1)),i(t("input",{type:"number","onUpdate:modelValue":e[4]||(e[4]=s=>l.value.paymentSettings.autoApprovalThreshold=s),class:"pl-8 pr-4 py-2 border border-slate-200 rounded-xl w-32 focus:ring-2 focus:ring-primary-500 outline-none text-sm font-bold"},null,512),[[v,l.value.paymentSettings.autoApprovalThreshold]])])])):g("",!0)])]),t("div",le,[e[24]||(e[24]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between"><div><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Spending Limits </h3><p class="text-xs text-slate-500 mt-1">Platform-defined spending controls for your company.</p></div><span class="px-3 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold rounded-full uppercase tracking-wider">Read Only</span></div>',1)),t("div",ae,[t("div",oe,[e[21]||(e[21]=t("label",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Daily Limit",-1)),t("p",re,"₦"+n(l.value.paymentSettings.dailyLimit.toLocaleString()),1)]),t("div",ne,[e[22]||(e[22]=t("label",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Monthly Limit",-1)),t("p",ie,"₦"+n(l.value.paymentSettings.monthlyLimit.toLocaleString()),1)]),t("div",de,[e[23]||(e[23]=t("label",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Overdraft Limit",-1)),t("p",pe,"₦"+n(l.value.paymentSettings.negativeBalanceLimit.toLocaleString()),1)])])]),t("div",ue,[e[27]||(e[27]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between"><div><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> Billing Plan </h3><p class="text-xs text-slate-500 mt-1">Details about your active subscription and billing cycle.</p></div><span class="px-3 py-1 bg-slate-100 text-slate-500 text-[10px] font-bold rounded-full uppercase tracking-wider">Read Only</span></div>',1)),t("div",ce,[t("div",be,[e[25]||(e[25]=t("label",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Active Plan",-1)),t("p",ve,n(l.value.planType),1)]),t("div",xe,[e[26]||(e[26]=t("label",{class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1"},"Billing Cycle",-1)),t("p",me,n(l.value.billingCycleSettings.billingDay==="last"?"Full Month":`Every ${l.value.billingCycleSettings.billingDay}th`),1)])])]),t("div",fe,[e[31]||(e[31]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50"><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Operational Hours </h3><p class="text-xs text-slate-500 mt-1">Specify when approvals can be processed.</p></div>',1)),t("div",ge,[t("div",ye,[t("div",he,[e[28]||(e[28]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Start Time",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=s=>l.value.paymentSettings.approvalHours.start=s),type:"time",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-sm font-bold"},null,512),[[v,l.value.paymentSettings.approvalHours.start]])]),t("div",we,[e[29]||(e[29]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"End Time",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=s=>l.value.paymentSettings.approvalHours.end=s),type:"time",class:"w-full px-4 py-2 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-sm font-bold"},null,512),[[v,l.value.paymentSettings.approvalHours.end]])])]),t("div",ke,[e[30]||(e[30]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-wider"},"Active Days",-1)),t("div",Se,[(b(),c(I,null,O(T,s=>t("button",{key:s.value,onClick:h=>D(s.value),class:w(["px-4 py-2 rounded-xl text-xs font-bold transition-all border",l.value.paymentSettings.approvalHours.days.includes(s.value)?"bg-primary-600 border-primary-600 text-white":"bg-slate-50 border-slate-100 text-slate-500 hover:border-slate-300"])},n(s.label),11,Ce)),64))])])])]),t("div",_e,[e[35]||(e[35]=m('<div class="p-6 border-b border-slate-100 bg-slate-50/50"><h3 class="font-bold text-slate-900 flex items-center"><svg class="w-5 h-5 mr-2 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg> Security &amp; Authentication </h3><p class="text-xs text-slate-500 mt-1">Configure access and protection for high-value actions.</p></div>',1)),t("div",Ae,[t("div",Pe,[e[32]||(e[32]=t("div",null,[t("p",{class:"font-bold text-slate-900"},"Approval PIN"),t("p",{class:"text-xs text-slate-500"},"Required for every manual order approval.")],-1)),t("button",{onClick:e[7]||(e[7]=s=>x.value=!0),class:"px-4 py-2 text-xs font-bold border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors shadow-sm"}," Change PIN ")]),t("div",Le,[e[34]||(e[34]=t("div",null,[t("p",{class:"font-bold text-slate-900"},"Email 2FA"),t("p",{class:"text-xs text-slate-500"},"Enable two-factor authentication for sensitive approvals.")],-1)),t("label",He,[i(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>l.value.twoFactorEnabled=s),class:"sr-only peer"},null,512),[[V,l.value.twoFactorEnabled]]),e[33]||(e[33]=t("div",{class:"w-11 h-6 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"},null,-1))])])])])]),t("div",Me,[t("button",{onClick:j,disabled:d.value,class:"px-8 py-3 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg shadow-primary-500/25 disabled:opacity-50"},n(d.value?"Saving...":"Save Changes"),9,Ne)]),x.value?(b(),c("div",Ve,[t("div",Be,[t("div",Te,[e[36]||(e[36]=t("h3",{class:"text-xl font-bold text-slate-900"},"Update Approval PIN",-1)),o.value&&x.value?(b(),c("div",{key:0,class:w(["mt-2 p-3 rounded-lg border text-xs font-bold animate-pulse",p.value==="success"?"bg-emerald-50 border-emerald-100 text-emerald-600":"bg-rose-50 border-rose-100 text-rose-600"])},n(o.value),3)):g("",!0)]),t("div",De,[t("div",Ee,[e[37]||(e[37]=t("label",{class:"text-sm font-medium text-slate-700"},"New 4-6 Digit PIN",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>f.value=s),type:"password",maxlength:"6",class:"w-full px-4 py-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-center text-2xl tracking-widest",autofocus:""},null,512),[[v,f.value]])]),t("div",je,[t("button",{onClick:e[10]||(e[10]=s=>x.value=!1),class:"flex-1 py-3 border border-slate-200 text-slate-700 font-bold rounded-xl hover:bg-slate-50 transition-colors"},"Cancel"),t("button",{onClick:F,disabled:d.value,class:"flex-1 py-3 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all disabled:opacity-50"},"Update",8,Fe)])])])])):g("",!0)]))}});typeof B=="function"&&B(ze);export{ze as default};
