import{A as N}from"./auth.service-DF8oVQSk.js";import{P as _}from"./partner-portal.service-D36OMrJc.js";import{d as T,r as i,o as M,i as L,a as r,j as n,b as e,e as d,t as o,n as k,I as j,h as A,w as V,q as p,F as O,f as z,g as D,C as S}from"./index-DPa4r9b9.js";import"./api-4GkiaaGr.js";const $={class:"space-y-6"},E={class:"bg-gradient-to-r from-primary-600 to-indigo-600 rounded-2xl p-8 text-white shadow-xl"},P={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},R={class:"text-3xl font-bold"},F={class:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4"},H={class:"bg-white/10 backdrop-blur-md rounded-xl p-4"},U={class:"text-2xl font-bold mt-1"},W={class:"bg-white/10 backdrop-blur-md rounded-xl p-4"},I={class:"text-2xl font-bold mt-1"},Q={class:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10 relative group"},G={class:"text-[10px] text-primary-100 uppercase tracking-widest font-bold"},J={class:"text-2xl font-black mt-1 text-white"},K={key:0,class:"mt-2 flex items-center justify-between"},X={class:"h-1.5 bg-white/20 rounded-full flex-1 mr-3 overflow-hidden"},Y={class:"text-[9px] font-bold text-primary-200"},Z={class:"bg-primary-500/50 backdrop-blur-md rounded-xl p-4 border border-white/20 ring-4 ring-white/5"},q={class:"text-2xl font-black mt-1 text-white"},ee={key:0,class:"bg-emerald-500/20 backdrop-blur-md rounded-xl p-4 border border-emerald-300/30"},te={class:"text-2xl font-black mt-1 text-white"},se={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},oe={class:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200"},ae={class:"p-6 border-b border-slate-100 flex justify-between items-center"},le={class:"p-6 space-y-6"},re={key:0,class:"text-center py-8 text-slate-500 text-sm"},ne={class:"flex items-center space-x-3"},ie={class:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 font-bold uppercase"},de={class:"font-medium text-slate-900"},pe={class:"text-xs text-slate-500"},ce={class:"text-right"},me={class:"font-bold text-slate-900"},ue={class:"space-y-6"},xe={class:"bg-white rounded-xl shadow-sm border border-slate-200 p-6"},be={class:"space-y-3"},ve=T({__name:"index",setup(ge){const m=i("Admin"),s=i({employeeCount:0,pendingOrders:0,walletBalance:0,todaySpend:0,monthSpend:0,planType:"prepaid",paymentSettings:null,earningsSettings:null,earningsBalance:0}),c=i([]),u=i(!0),C=async()=>{try{u.value=!0;const[l,t]=await Promise.all([_.getStats(),_.getOrderRequests({limit:5})]);s.value=l,c.value=t.data}catch(l){console.error("Failed to fetch dashboard data",l)}finally{u.value=!1}};return M(async()=>{const l=N.getUser();l&&(m.value=l.firstName),await C()}),(l,t)=>{var x,b;const B=L("router-link");return n(),r("div",$,[e("div",E,[e("div",P,[e("div",null,[e("h1",R,"Welcome back, "+o(m.value)+"!",1),t[3]||(t[3]=e("p",{class:"mt-2 text-primary-100 opacity-90"},"Here's what's happening with your company account today.",-1))]),s.value.planType?(n(),r("div",{key:0,class:k(["px-4 py-1.5 rounded-full text-xs font-black border uppercase tracking-widest",s.value.planType==="postpaid"?"bg-amber-400/20 border-amber-400 text-amber-200":"bg-emerald-400/20 border-emerald-400 text-emerald-100"])},o(s.value.planType)+" billing ",3)):d("",!0)]),e("div",F,[e("div",H,[t[4]||(t[4]=e("p",{class:"text-xs text-primary-100 uppercase tracking-wider font-semibold"},"Total Employees",-1)),e("p",U,o(s.value.employeeCount),1)]),e("div",W,[t[5]||(t[5]=e("p",{class:"text-xs text-primary-100 uppercase tracking-wider font-semibold"},"Pending Orders",-1)),e("p",I,o(s.value.pendingOrders),1)]),e("div",Q,[e("p",G,o(s.value.planType==="postpaid"?"Monthly Utilization":"Wallet Balance"),1),e("p",J," ₦"+o((s.value.planType==="postpaid"?Math.abs(s.value.walletBalance):s.value.walletBalance).toLocaleString()),1),s.value.planType==="postpaid"&&((x=s.value.paymentSettings)!=null&&x.monthlyLimit)?(n(),r("div",K,[e("div",X,[e("div",{class:"h-full bg-white rounded-full transition-all duration-1000",style:j({width:`${Math.min(100,Math.abs(s.value.walletBalance)/s.value.paymentSettings.monthlyLimit*100)}%`})},null,4)]),e("span",Y," Limit: ₦"+o(s.value.paymentSettings.monthlyLimit.toLocaleString()),1)])):d("",!0)]),e("div",Z,[t[6]||(t[6]=e("p",{class:"text-[10px] text-white uppercase tracking-widest font-black"},"This Month's Spend",-1)),e("p",q,"₦"+o(s.value.monthSpend.toLocaleString()),1)]),(b=s.value.earningsSettings)!=null&&b.enabled?(n(),r("div",ee,[t[7]||(t[7]=e("p",{class:"text-xs text-emerald-100 uppercase tracking-wider font-semibold"},"Total Earnings",-1)),e("p",te,"₦"+o(s.value.earningsBalance.toLocaleString()),1)])):d("",!0)])]),e("div",se,[e("div",oe,[e("div",ae,[t[9]||(t[9]=e("h3",{class:"font-bold text-slate-900"},"Recent Employee Activity",-1)),A(B,{to:"/partner/orders",class:"text-sm text-primary-600 font-medium hover:underline"},{default:V(()=>[...t[8]||(t[8]=[p("View All",-1)])]),_:1})]),e("div",le,[c.value.length===0?(n(),r("div",re," No recent activity found. ")):d("",!0),(n(!0),r(O,null,z(c.value,a=>{var v,g,f,h,y,w;return n(),r("div",{key:a._id,class:"flex items-center justify-between"},[e("div",ne,[e("div",ie,o(((g=(v=a.user)==null?void 0:v.firstName)==null?void 0:g[0])||"U"),1),e("div",null,[e("p",de,o(((f=a.order)==null?void 0:f.orderNumber)||"Order")+" by "+o((h=a.user)==null?void 0:h.firstName),1),e("p",pe,o(new Date(a.createdAt).toLocaleTimeString())+" • Ref: #"+o(((w=(y=a.order)==null?void 0:y.orderNumber)==null?void 0:w.slice(-8).toUpperCase())||"ORD"),1)])]),e("div",ce,[e("p",me,"₦"+o(a.amount.toLocaleString()),1),e("span",{class:k(["text-[10px] uppercase font-bold px-1.5 py-0.5 rounded",a.status==="approved"?"bg-emerald-50 text-emerald-600":a.status==="rejected"?"bg-rose-50 text-rose-600":"bg-amber-50 text-amber-600"])},o(a.status),3)])])}),128))])]),e("div",ue,[e("div",xe,[t[13]||(t[13]=e("h3",{class:"font-bold text-slate-900 mb-4"},"Quick Actions",-1)),e("div",be,[e("button",{onClick:t[0]||(t[0]=a=>l.$router.push("/partner/employees")),class:"w-full flex items-center px-4 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors text-slate-700 font-medium"},[...t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1),p(" Add New Employee ",-1)])]),s.value.planType!=="postpaid"?(n(),r("button",{key:0,onClick:t[1]||(t[1]=a=>l.$router.push("/partner/wallet")),class:"w-full flex items-center px-4 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors text-slate-700 font-medium"},[...t[11]||(t[11]=[e("svg",{class:"w-5 h-5 mr-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),p(" Fund Company Wallet ",-1)])])):(n(),r("button",{key:1,onClick:t[2]||(t[2]=a=>l.$router.push("/partner/reports")),class:"w-full flex items-center px-4 py-3 bg-slate-50 rounded-xl hover:bg-slate-100 transition-colors text-slate-700 font-medium"},[...t[12]||(t[12]=[e("svg",{class:"w-5 h-5 mr-3 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2m3 2h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})],-1),p(" View Billing Reports ",-1)])]))])]),t[14]||(t[14]=D('<div class="bg-emerald-50 rounded-xl border border-emerald-100 p-6"><div class="flex items-center mb-3"><div class="w-2 h-2 bg-emerald-500 rounded-full animate-pulse mr-2"></div><p class="text-sm font-bold text-emerald-800">Operational</p></div><p class="text-xs text-emerald-700">All systems are running smoothly. Automatic approvals are currently active.</p></div>',1))])])])}}});typeof S=="function"&&S(ve);export{ve as default};
