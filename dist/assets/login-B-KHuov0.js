import{d as g,r,c as l,a as e,w as y,e as b,f as c,v as p,t as v,u as x,o as n}from"./index-DOnWl8Pk.js";import{A as w}from"./auth.service-PNRE_spH.js";import"./api-Csnh6SWI.js";const h={class:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},_={class:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-md"},k={class:"rounded-md shadow-sm -space-y-px"},S={key:0,class:"text-red-500 text-sm text-center"},E=["disabled"],L={key:0},V={key:1},z=g({__name:"login",setup(B){const m=x(),d=r(""),i=r(""),t=r(""),a=r(!1),f=async()=>{var u,s;a.value=!0,t.value="";try{const o=await w.login({email:d.value,password:i.value});if(o.success)localStorage.setItem("admin_token",o.data.token),localStorage.setItem("admin_user",JSON.stringify(o.data.admin)),o.data.admin.role==="partner"?m.push("/partner"):m.push("/admin");else throw new Error(o.message||"Login failed")}catch(o){console.error(o),t.value=((s=(u=o.response)==null?void 0:u.data)==null?void 0:s.message)||o.message||"Login failed"}finally{a.value=!1}};return(u,s)=>(n(),l("div",h,[e("div",_,[s[4]||(s[4]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Partner Login "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Sign in to manage your company ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:y(f,["prevent"])},[e("div",k,[e("div",null,[s[2]||(s[2]=e("label",{for:"email-address",class:"sr-only"},"Email address",-1)),c(e("input",{id:"email-address",name:"email",type:"email",autocomplete:"email",required:"","onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email address"},null,512),[[p,d.value]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"sr-only"},"Password",-1)),c(e("input",{id:"password",name:"password",type:"password",autocomplete:"current-password",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>i.value=o),class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[p,i.value]])])]),t.value?(n(),l("div",S,v(t.value),1)):b("",!0),e("div",null,[e("button",{type:"submit",disabled:a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[a.value?(n(),l("span",L,"Signing in...")):(n(),l("span",V,"Sign in"))],8,E)])],32)])]))}});export{z as default};
