import{d as N,r,o as P,a as i,j as d,b as e,g as p,t as a,p as S,z,A as W,e as D,F as B,f as V,n as u,q as h,C as M}from"./index-CVDPA8xH.js";import{P as A}from"./partner-portal.service-D36OMrJc.js";import"./api-4GkiaaGr.js";const E={class:"space-y-6"},U={class:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4"},H={class:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow group"},G={class:"text-2xl font-bold text-slate-900"},I={class:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow"},$={class:"text-2xl font-bold text-slate-900"},q={class:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow"},Q={class:"text-2xl font-bold text-slate-900"},R={class:"mt-2 text-xs text-slate-400 font-medium"},J={class:"bg-white p-6 rounded-2xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow"},K={class:"text-2xl font-bold text-slate-900"},O={class:"mt-2 text-xs text-slate-400 font-medium"},X={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 py-2"},Y={class:"relative flex-1 max-w-md"},Z={class:"flex items-center space-x-3"},ee={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},te={class:"overflow-x-auto text-sm"},se={class:"min-w-full divide-y divide-slate-200"},ae={class:"divide-y divide-slate-100"},oe={key:1},le={class:"px-6 py-4 whitespace-nowrap font-medium text-slate-900"},ne={class:"px-6 py-4"},re={class:"text-slate-900 font-semibold mb-0.5"},ie={class:"text-[11px] text-slate-400 truncate max-w-[200px]"},de={class:"px-6 py-4 whitespace-nowrap"},ce={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap text-xs text-slate-500 tabular-nums"},xe={key:0,class:"px-6 py-4 bg-slate-50 border-t border-slate-100 flex items-center justify-between"},me={class:"text-xs text-slate-500"},ve={class:"flex space-x-2"},fe=["disabled"],he=["disabled"],be=N({__name:"index",setup(ge){const l=r({balance:0,netChange:0,totalTransactions:0,totalDeposits:0,depositCount:0,totalDeductions:0,deductionCount:0,planType:"prepaid"}),x=r([]),o=r(null),m=r(!0),v=r(""),f=r(""),F=async()=>{try{const n=await A.getWalletStats("earnings");l.value=n||l.value}catch(n){console.error("Failed to fetch earnings stats",n)}},c=async(n=1)=>{try{m.value=!0;const t=await A.getTransactions({page:n,limit:10,search:v.value,status:f.value||void 0,walletType:"earnings"});x.value=t.data,o.value=t.meta}catch(t){console.error("Failed to fetch transactions",t)}finally{m.value=!1}},b=()=>{F(),c(1)};let g=null;const L=()=>{clearTimeout(g),g=setTimeout(()=>{c(1)},500)};return P(()=>{b()}),(n,t)=>{var w,y,_;return d(),i("div",E,[t[16]||(t[16]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Earnings"),e("p",{class:"mt-1 text-sm text-slate-500"},"Track your earnings and view transaction history")]),e("div",{class:"flex items-center space-x-3"})],-1)),e("div",U,[e("div",H,[t[4]||(t[4]=p('<div class="flex items-center justify-between mb-4"><p class="text-sm font-medium text-slate-500">Available Balance</p><div class="w-10 h-10 rounded-xl flex items-center justify-center bg-emerald-50 text-emerald-600"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div>',1)),e("h3",G," ₦"+a(((w=l.value.balance)==null?void 0:w.toLocaleString())||0),1),t[5]||(t[5]=e("p",{class:"mt-2 text-xs font-medium text-emerald-600"}," Total Available for Withdrawal ",-1))]),e("div",I,[t[6]||(t[6]=p('<div class="flex items-center justify-between mb-4"><p class="text-sm font-medium text-slate-500">Transactions</p><div class="w-10 h-10 bg-slate-50 text-slate-600 rounded-xl flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div></div>',1)),e("h3",$,a(l.value.totalTransactions||0),1),t[7]||(t[7]=e("p",{class:"mt-2 text-xs text-slate-400 font-medium"},"Activity Count",-1))]),e("div",q,[t[8]||(t[8]=p('<div class="flex items-center justify-between mb-4"><p class="text-sm font-medium text-slate-500">Total Earned</p><div class="w-10 h-10 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg></div></div>',1)),e("h3",Q,"₦"+a(((y=l.value.totalDeposits)==null?void 0:y.toLocaleString())||0),1),e("p",R,a(l.value.depositCount||0)+" Credits",1)]),e("div",J,[t[9]||(t[9]=p('<div class="flex items-center justify-between mb-4"><p class="text-sm font-medium text-slate-500">Total Withdrawn</p><div class="w-10 h-10 bg-rose-50 text-rose-600 rounded-xl flex items-center justify-center"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg></div></div>',1)),e("h3",K,"₦"+a(((_=l.value.totalDeductions)==null?void 0:_.toLocaleString())||0),1),e("p",O,a(l.value.deductionCount||0)+" Withdrawals",1)])]),e("div",X,[e("div",Y,[S(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>v.value=s),onInput:L,type:"text",placeholder:"Filter by reference or notes...",class:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none transition-all text-sm"},null,544),[[z,v.value]]),t[10]||(t[10]=e("svg",{class:"absolute left-3.5 top-3.5 w-4 h-4 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))]),e("div",Z,[S(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),onChange:b,class:"px-4 py-2.5 text-sm bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-primary-500 outline-none text-slate-700"},[...t[11]||(t[11]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"failed"},"Failed",-1)])],544),[[W,f.value]])])]),e("div",ee,[e("div",te,[e("table",se,[t[15]||(t[15]=e("thead",null,[e("tr",{class:"bg-slate-50"},[e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Reference ID"),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Detail"),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Value"),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"},"Timestamp")])],-1)),e("tbody",ae,[m.value?(d(),i(B,{key:0},V(5,s=>e("tr",{key:s},[...t[12]||(t[12]=[e("td",{colspan:"6",class:"px-6 py-4 text-center"},[e("div",{class:"h-4 bg-slate-50 rounded animate-pulse w-full"})],-1)])])),64)):x.value.length===0?(d(),i("tr",oe,[...t[13]||(t[13]=[e("td",{colspan:"6",class:"px-6 py-12 text-center text-slate-500"},"No transactions found.",-1)])])):D("",!0),(d(!0),i(B,null,V(x.value,s=>{var k,T,C,j;return d(),i("tr",{key:s._id,class:"hover:bg-slate-50/50 transition-colors"},[e("td",le,"#"+a(((k=s.reference)==null?void 0:k.toUpperCase())||"N/A"),1),e("td",ne,[e("div",re,a(s.reason),1),e("div",ie,a(((T=s.metadata)==null?void 0:T.notes)||"System transaction"),1)]),e("td",de,[e("span",{class:u(["px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider",s.transactionType==="credit"?"bg-emerald-50 text-emerald-600":"bg-slate-50 text-slate-600"])},a(s.transactionType==="credit"?"Earnings":"Withdrawal"),3)]),e("td",ce,[e("span",{class:u(["font-bold tabular-nums",s.transactionType==="credit"?"text-emerald-600":"text-slate-900"])},a(s.transactionType==="credit"?"+":"-")+"₦"+a(((C=s.nairaAmount)==null?void 0:C.toLocaleString())||0),3)]),e("td",pe,[e("span",{class:u(["inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium",s.status==="completed"?"bg-emerald-100 text-emerald-700":s.status==="pending"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"])},[e("span",{class:u(["w-1 h-1 rounded-full mr-1.5",s.status==="completed"?"bg-emerald-500":s.status==="pending"?"bg-amber-500":"bg-rose-500"])},null,2),h(" "+a((j=s.status)==null?void 0:j.toUpperCase()),1)],2)]),e("td",ue,[h(a(new Date(s.createdAt).toLocaleDateString("en-GB")),1),t[14]||(t[14]=e("br",null,null,-1)),h(" "+a(new Date(s.createdAt).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})),1)])])}),128))])])]),o.value&&o.value.pages>1?(d(),i("div",xe,[e("span",me,"Page "+a(o.value.page)+" of "+a(o.value.pages),1),e("div",ve,[e("button",{onClick:t[2]||(t[2]=s=>c(o.value.page-1)),disabled:o.value.page===1,class:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs font-medium text-slate-600 hover:bg-slate-50 disabled:opacity-50"}," Prev ",8,fe),e("button",{onClick:t[3]||(t[3]=s=>c(o.value.page+1)),disabled:o.value.page===o.value.pages,class:"px-3 py-1 bg-white border border-slate-200 rounded-lg text-xs font-medium text-slate-600 hover:bg-slate-50 disabled:opacity-50"}," Next ",8,he)])])):D("",!0)])])}}});typeof M=="function"&&M(be);export{be as default};
