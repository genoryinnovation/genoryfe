import{d as C,r as x,z as V,j as U,q as M,c as u,a as t,B as y,t as p,b as c,f as s,v as i,A as g,F as P,k as S,e as q,h as B,w as N,u as j,o as m}from"./index-CuRqyThw.js";import{C as b}from"./catalog.service-DTry473v.js";import"./api-Csnh6SWI.js";const L={class:"space-y-6"},z={class:"flex items-center space-x-4"},D={class:"text-2xl font-bold text-slate-900"},F={class:"mt-1 text-sm text-slate-500"},A={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},R={class:"p-6 space-y-6"},E={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},G={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},I={class:"p-6"},T={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},O=["value"],$={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},H={class:"p-6"},K={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},Q={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},J={class:"p-6"},W={class:"flex justify-end space-x-3"},X=["disabled"],Y={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},re=C({__name:"form",setup(Z){const v=M(),a=j(),d=x(!1),n=x(!1),f=x([]),o=V({title:"",sku:"",description:"",price:0,currency:"NGN",category:"",inventory:{quantity:0,unit:"pieces",reorderLevel:10},status:"active",images:[]}),w=async()=>{try{const l=await b.getCategories();f.value=l.data}catch(l){console.error("Failed to fetch categories",l)}},k=async l=>{try{const r=(await b.getProduct(l)).data;Object.assign(o,{title:r.title,sku:r.sku,description:r.description,price:r.price,currency:r.currency,category:r.category._id||r.category,inventory:{quantity:r.inventory.quantity,unit:r.inventory.unit,reorderLevel:r.inventory.reorderLevel},status:r.status,images:r.images})}catch(e){console.error("Failed to fetch product",e),a.push("/admin/catalog/products")}},h=async()=>{n.value=!0;try{d.value?await b.updateProduct(v.params.id,o):await b.createProduct(o),a.push("/admin/catalog/products")}catch(l){console.error("Failed to save product",l),alert("Failed to save product")}finally{n.value=!1}};return U(async()=>{await w(),v.params.id&&(d.value=!0,await k(v.params.id))}),(l,e)=>(m(),u("div",L,[t("div",z,[t("button",{onClick:e[0]||(e[0]=r=>y(a).back()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-xl transition-colors"},[...e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("div",null,[t("h1",D,p(d.value?"Edit Product":"Create Product"),1),t("p",F,p(d.value?"Update product information":"Add a new product to the catalog"),1)])]),t("form",{onSubmit:N(h,["prevent"]),class:"space-y-6"},[t("div",A,[e[16]||(e[16]=c('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Basic Information</h3></div>',1)),t("div",R,[t("div",E,[t("div",null,[e[13]||(e[13]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Title",-1)),s(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>o.title=r),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Product title"},null,512),[[i,o.title]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"SKU",-1)),s(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.sku=r),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all font-mono",placeholder:"PROD-001"},null,512),[[i,o.sku]])])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),s(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>o.description=r),rows:"3",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none",placeholder:"Product description..."},null,512),[[i,o.description]])])])]),t("div",G,[e[22]||(e[22]=c('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Pricing &amp; Category</h3></div>',1)),t("div",I,[t("div",T,[t("div",null,[e[17]||(e[17]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Price",-1)),s(t("input",{"onUpdate:modelValue":e[4]||(e[4]=r=>o.price=r),type:"number",min:"0",step:"0.01",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"0.00"},null,512),[[i,o.price,void 0,{number:!0}]])]),t("div",null,[e[19]||(e[19]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Currency",-1)),s(t("select",{"onUpdate:modelValue":e[5]||(e[5]=r=>o.currency=r),class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[...e[18]||(e[18]=[t("option",{value:"NGN"},"NGN",-1),t("option",{value:"USD"},"USD",-1)])],512),[[g,o.currency]])]),t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Category",-1)),s(t("select",{"onUpdate:modelValue":e[6]||(e[6]=r=>o.category=r),required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[e[20]||(e[20]=t("option",{value:"",disabled:""},"Select category",-1)),(m(!0),u(P,null,S(f.value,r=>(m(),u("option",{key:r._id,value:r._id},p(r.name),9,O))),128))],512),[[g,o.category]])])])])]),t("div",$,[e[26]||(e[26]=c('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Inventory</h3></div>',1)),t("div",H,[t("div",K,[t("div",null,[e[23]||(e[23]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Quantity",-1)),s(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>o.inventory.quantity=r),type:"number",min:"0",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"0"},null,512),[[i,o.inventory.quantity,void 0,{number:!0}]])]),t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Unit",-1)),s(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>o.inventory.unit=r),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"e.g., pieces, kg"},null,512),[[i,o.inventory.unit]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Reorder Level",-1)),s(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>o.inventory.reorderLevel=r),type:"number",min:"0",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"10"},null,512),[[i,o.inventory.reorderLevel,void 0,{number:!0}]])])])])]),t("div",Q,[e[29]||(e[29]=c('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Status</h3></div>',1)),t("div",J,[e[28]||(e[28]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Product Status",-1)),s(t("select",{"onUpdate:modelValue":e[10]||(e[10]=r=>o.status=r),class:"w-full sm:w-1/3 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[...e[27]||(e[27]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"discontinued"},"Discontinued",-1)])],512),[[g,o.status]])])]),t("div",W,[t("button",{type:"button",onClick:e[11]||(e[11]=r=>y(a).back()),class:"px-5 py-2.5 border border-slate-200 rounded-xl text-sm font-semibold text-slate-700 hover:bg-slate-50 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:n.value,class:"inline-flex items-center px-5 py-2.5 text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 shadow-lg shadow-primary-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[n.value?(m(),u("svg",Y,[...e[30]||(e[30]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):q("",!0),B(" "+p(n.value?"Saving...":"Save Product"),1)],8,X)])],32)]))}});export{re as default};
