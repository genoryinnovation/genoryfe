import{d as S,r,f as B,c as d,a as t,t as a,e as D,v as W,F as C,l as V,j as A,o as i,k as u,b as w,h as F,i as U}from"./index-C4KQTk6n.js";import{W as N}from"./wallet.service-VSoGEOlu.js";import"./api-Csnh6SWI.js";const j={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-6"},P={class:"bg-white overflow-hidden shadow rounded-lg"},$={class:"px-4 py-5 sm:p-6"},G={class:"mt-1 text-3xl font-semibold text-gray-900"},K={class:"bg-white overflow-hidden shadow rounded-lg"},M={class:"px-4 py-5 sm:p-6"},R={class:"mt-1 text-3xl font-semibold text-purple-600"},E={class:"bg-white overflow-hidden shadow rounded-lg"},I={class:"px-4 py-5 sm:p-6"},q={class:"mt-1 text-3xl font-semibold text-blue-600"},z={class:"mb-6"},H={class:"bg-white shadow overflow-hidden sm:rounded-lg"},J={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap"},X={class:"flex items-center"},Y={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold"},Z={class:"ml-4"},tt={class:"text-sm font-medium text-gray-900"},et={class:"text-sm text-gray-500"},st={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600"},at={key:0,class:"text-xs text-gray-500 block"},ot={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-purple-600"},lt={key:0,class:"text-xs text-gray-500 block"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},it={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},nt={class:"mt-4 flex justify-between items-center"},rt={class:"text-sm text-gray-700"},ct={class:"flex space-x-2"},pt=["disabled"],ut=["disabled"],_t=S({__name:"index",setup(xt){const x=r([]),n=r({}),c=r(""),o=r({page:1,limit:10,total:0,pages:1});let m;const p=async()=>{try{const[l,e]=await Promise.all([N.getWallets(o.value.page,o.value.limit,c.value),N.getWalletStats()]);x.value=l.data.wallets,o.value=l.data.pagination,n.value=e.data}catch(l){console.error("Failed to fetch wallets",l)}},L=()=>{clearTimeout(m),m=setTimeout(()=>{o.value.page=1,p()},300)},g=l=>{l>=1&&l<=o.value.pages&&(o.value.page=l,p())};return B(()=>{p()}),(l,e)=>{const T=A("router-link");return i(),d("div",null,[e[8]||(e[8]=t("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Wallets",-1)),t("div",j,[t("div",P,[t("div",$,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Naira Balance",-1)),t("dd",G,"NGN "+a((n.value.totalNairaBalance||0).toLocaleString()),1)])]),t("div",K,[t("div",M,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Token Balance",-1)),t("dd",R,a((n.value.totalTokenBalance||0).toLocaleString())+" TKN",1)])]),t("div",E,[t("div",I,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Wallets",-1)),t("dd",q,a(n.value.totalWallets||0),1)])])]),t("div",z,[D(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.value=s),onInput:L,type:"text",placeholder:"Search by user name or email...",class:"w-full border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[W,c.value]])]),t("div",H,[t("table",J,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Naira Balance "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Token Balance "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Last Updated "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",O,[(i(!0),d(C,null,V(x.value,s=>{var v,_,h,y,f,b,k;return i(),d("tr",{key:s._id},[t("td",Q,[t("div",X,[t("div",Y,a((_=(v=s.userDetails)==null?void 0:v.firstName)==null?void 0:_.charAt(0))+a((y=(h=s.userDetails)==null?void 0:h.lastName)==null?void 0:y.charAt(0)),1),t("div",Z,[t("div",tt,a((f=s.userDetails)==null?void 0:f.firstName)+" "+a((b=s.userDetails)==null?void 0:b.lastName),1),t("div",et,a((k=s.userDetails)==null?void 0:k.email),1)])])]),t("td",st,[u(" NGN "+a((s.nairaBalance||0).toLocaleString())+" ",1),s.nairaLocked>0?(i(),d("span",at,"Locked: "+a(s.nairaLocked.toLocaleString()),1)):w("",!0)]),t("td",ot,[u(a((s.tokenBalance||0).toLocaleString())+" TKN ",1),s.tokenLocked>0?(i(),d("span",lt,"Locked: "+a(s.tokenLocked.toLocaleString()),1)):w("",!0)]),t("td",dt,a(new Date(s.updatedAt).toLocaleDateString()),1),t("td",it,[F(T,{to:`/admin/users/${s.user}`,class:"text-blue-600 hover:text-blue-900"},{default:U(()=>[...e[6]||(e[6]=[u(" View User ",-1)])]),_:1},8,["to"])])])}),128))])])]),t("div",nt,[t("div",rt," Showing page "+a(o.value.page)+" of "+a(o.value.pages)+" ("+a(o.value.total)+" results) ",1),t("div",ct,[t("button",{onClick:e[1]||(e[1]=s=>g(o.value.page-1)),disabled:o.value.page===1,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Previous ",8,pt),t("button",{onClick:e[2]||(e[2]=s=>g(o.value.page+1)),disabled:o.value.page===o.value.pages,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Next ",8,ut)])])])}}});export{_t as default};
