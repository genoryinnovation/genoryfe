import{d as j,r,o as N,i as V,a as d,j as c,b as e,p as y,z as B,A as D,e as F,F as T,f as A,t as l,n as k,q as i,h as I,w as z,C}from"./index-CVDPA8xH.js";import{S as P}from"./subscription.service-D7a8DyVD.js";import"./api-4GkiaaGr.js";const U={class:"space-y-6"},q={class:"flex flex-col sm:flex-row gap-4"},$={class:"flex-1 relative"},H={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},L={class:"overflow-x-auto"},E={class:"min-w-full divide-y divide-slate-200"},G={class:"divide-y divide-slate-100"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"flex items-center"},O={class:"flex-shrink-0 w-9 h-9 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-sm font-medium text-slate-600"},Q={class:"ml-3"},R={class:"text-sm font-medium text-slate-900"},W={class:"text-xs text-slate-500"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"text-sm font-medium text-slate-900"},Z={class:"text-xs text-slate-500"},ee={class:"px-6 py-4 whitespace-nowrap"},te={class:"text-sm text-slate-600 capitalize"},se={class:"px-6 py-4 whitespace-nowrap"},oe={class:"text-sm text-slate-900"},le={class:"px-6 py-4 whitespace-nowrap"},ae={class:"px-6 py-4 whitespace-nowrap text-right"},ie={key:0,class:"text-center py-12"},ne={class:"flex items-center justify-between"},re={class:"text-sm text-slate-600"},de={class:"font-medium"},ce={class:"font-medium"},pe={class:"text-slate-400 ml-1"},ue={class:"flex items-center space-x-2"},xe=["disabled"],me=["disabled"],ve=j({__name:"index",setup(fe){const p=r([]),u=r(""),x=r(""),o=r({page:1,limit:10,total:0,pages:1});let m;const n=async()=>{try{const a=await P.getSubscriptions({page:o.value.page,limit:o.value.limit,status:x.value,search:u.value});p.value=a.data.subscriptions,o.value=a.data.pagination}catch(a){console.error("Failed to fetch subscriptions",a)}},S=()=>{clearTimeout(m),m=setTimeout(()=>{o.value.page=1,n()},300)},v=a=>{a>=1&&a<=o.value.pages&&(o.value.page=a,n())};return N(()=>{n()}),(a,t)=>{const M=V("router-link");return c(),d("div",U,[t[13]||(t[13]=e("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-slate-900"},"Subscriptions"),e("p",{class:"mt-1 text-sm text-slate-500"},"Manage all customer subscriptions")])],-1)),e("div",q,[e("div",$,[t[4]||(t[4]=e("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onInput:S,type:"text",placeholder:"Search subscriptions...",class:"block w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},null,544),[[B,u.value]])]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),onChange:n,class:"px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all min-w-[160px]"},[...t[5]||(t[5]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"paused"},"Paused",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],544),[[D,x.value]])]),e("div",H,[e("div",L,[e("table",E,[t[7]||(t[7]=e("thead",null,[e("tr",{class:"bg-slate-50"},[e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Plan "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Frequency "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Next Delivery "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"relative px-6 py-4"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",G,[(c(!0),d(T,null,A(p.value,s=>{var f,h,g,w,b,_;return c(),d("tr",{key:s._id,class:"hover:bg-slate-50/50 transition-colors"},[e("td",J,[e("div",K,[e("div",O,l(((h=(f=s.userId)==null?void 0:f.firstName)==null?void 0:h.charAt(0))||"U"),1),e("div",Q,[e("div",R,l((g=s.userId)==null?void 0:g.firstName)+" "+l((w=s.userId)==null?void 0:w.lastName),1),e("div",W,l((b=s.userId)==null?void 0:b.email),1)])])]),e("td",X,[e("div",Y,l(s.name),1),e("div",Z,l(((_=s.items)==null?void 0:_.length)||0)+" items",1)]),e("td",ee,[e("span",te,l(s.frequency),1)]),e("td",se,[e("div",oe,l(new Date(s.nextDeliveryDate).toLocaleDateString()),1)]),e("td",le,[e("span",{class:k(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",{"bg-emerald-100 text-emerald-700":s.status==="active","bg-amber-100 text-amber-700":s.status==="paused","bg-slate-100 text-slate-600":s.status==="cancelled"}])},[e("span",{class:k(["w-1.5 h-1.5 rounded-full mr-2",{"bg-emerald-500":s.status==="active","bg-amber-500":s.status==="paused","bg-slate-400":s.status==="cancelled"}])},null,2),i(" "+l(s.status),1)],2)]),e("td",ae,[I(M,{to:`/admin/subscriptions/${s._id}`,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"},{default:z(()=>[...t[6]||(t[6]=[i(" View ",-1),e("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])])])}),128))])])]),p.value.length===0?(c(),d("div",ie,[...t[8]||(t[8]=[e("svg",{class:"mx-auto h-12 w-12 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),e("h3",{class:"mt-4 text-sm font-medium text-slate-900"},"No subscriptions found",-1),e("p",{class:"mt-1 text-sm text-slate-500"},"Try adjusting your search or filter criteria.",-1)])])):F("",!0)]),e("div",ne,[e("p",re,[t[9]||(t[9]=i(" Showing page ",-1)),e("span",de,l(o.value.page),1),t[10]||(t[10]=i(" of ",-1)),e("span",ce,l(o.value.pages),1),e("span",pe,"("+l(o.value.total)+" results)",1)]),e("div",ue,[e("button",{onClick:t[2]||(t[2]=s=>v(o.value.page-1)),disabled:o.value.page===1,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),i(" Previous ",-1)])],8,xe),e("button",{onClick:t[3]||(t[3]=s=>v(o.value.page+1)),disabled:o.value.page===o.value.pages,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[12]||(t[12]=[i(" Next ",-1),e("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,me)])])])}}});typeof C=="function"&&C(ve);export{ve as default};
