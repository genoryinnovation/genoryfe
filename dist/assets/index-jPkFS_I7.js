import{d as V,r,o as B,i as D,a as d,j as c,b as t,e as k,t as o,p as C,z as T,A,F,f as I,n as S,q as n,h as P,w as z,C as M}from"./index-DPa4r9b9.js";import{S as U}from"./subscription.service-D7a8DyVD.js";import"./api-4GkiaaGr.js";const q={class:"space-y-6"},$={key:0,class:"grid grid-cols-1 md:grid-cols-4 gap-4"},H={class:"bg-white p-4 rounded-xl shadow-sm border border-slate-100"},L={class:"mt-1 text-2xl font-bold text-slate-900"},E={class:"bg-white p-4 rounded-xl shadow-sm border border-slate-100"},G={class:"mt-1 text-2xl font-bold text-emerald-600"},J={class:"bg-white p-4 rounded-xl shadow-sm border border-slate-100"},K={class:"mt-1 text-2xl font-bold text-amber-600"},O={class:"bg-white p-4 rounded-xl shadow-sm border border-slate-100"},Q={class:"mt-1 text-2xl font-bold text-slate-600"},R={class:"flex flex-col sm:flex-row gap-4"},W={class:"flex-1 relative"},X={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},Y={class:"overflow-x-auto"},Z={class:"min-w-full divide-y divide-slate-200"},tt={class:"divide-y divide-slate-100"},et={class:"px-6 py-4 whitespace-nowrap"},st={class:"flex items-center"},ot={class:"flex-shrink-0 w-9 h-9 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-sm font-medium text-slate-600"},lt={class:"ml-3"},at={class:"text-sm font-medium text-slate-900"},it={class:"text-xs text-slate-500"},nt={class:"px-6 py-4 whitespace-nowrap"},rt={class:"text-sm font-medium text-slate-900"},dt={class:"text-xs text-slate-500"},ct={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm text-slate-600 capitalize"},ut={class:"px-6 py-4 whitespace-nowrap"},xt={class:"text-sm text-slate-900"},mt={class:"px-6 py-4 whitespace-nowrap"},vt={class:"px-6 py-4 whitespace-nowrap text-right"},ft={key:0,class:"text-center py-12"},ht={class:"flex items-center justify-between"},bt={class:"text-sm text-slate-600"},gt={class:"font-medium"},wt={class:"font-medium"},_t={class:"text-slate-400 ml-1"},yt={class:"flex items-center space-x-2"},kt=["disabled"],Ct=["disabled"],St=V({__name:"index",setup(Mt){const u=r([]),i=r(null),x=r(""),m=r(""),l=r({page:1,limit:10,total:0,pages:1});let v;const p=async()=>{try{const a=await U.getSubscriptions({page:l.value.page,limit:l.value.limit,status:m.value,search:x.value});console.log("Subscriptions response:",a.data),u.value=a.data.subscriptions,l.value=a.data.pagination,a.data.stats&&(i.value=a.data.stats)}catch(a){console.error("Failed to fetch subscriptions",a)}},j=()=>{clearTimeout(v),v=setTimeout(()=>{l.value.page=1,p()},300)},f=a=>{a>=1&&a<=l.value.pages&&(l.value.page=a,p())};return B(()=>{p()}),(a,e)=>{const N=D("router-link");return c(),d("div",q,[e[17]||(e[17]=t("div",{class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Subscriptions"),t("p",{class:"mt-1 text-sm text-slate-500"},"Manage all customer subscriptions")])],-1)),i.value?(c(),d("div",$,[t("div",H,[e[4]||(e[4]=t("p",{class:"text-sm font-medium text-slate-500"},"Total Subscriptions",-1)),t("p",L,o(i.value.total),1)]),t("div",E,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-slate-500"},"Active",-1)),t("p",G,o(i.value.active),1)]),t("div",J,[e[6]||(e[6]=t("p",{class:"text-sm font-medium text-slate-500"},"Paused",-1)),t("p",K,o(i.value.paused),1)]),t("div",O,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-slate-500"},"Cancelled",-1)),t("p",Q,o(i.value.cancelled),1)])])):k("",!0),t("div",R,[t("div",W,[e[8]||(e[8]=t("div",{class:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"},[t("svg",{class:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),C(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),onInput:j,type:"text",placeholder:"Search subscriptions...",class:"block w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},null,544),[[T,x.value]])]),C(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),onChange:p,class:"px-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all min-w-[160px]"},[...e[9]||(e[9]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"paused"},"Paused",-1),t("option",{value:"cancelled"},"Cancelled",-1)])],544),[[A,m.value]])]),t("div",X,[t("div",Y,[t("table",Z,[e[11]||(e[11]=t("thead",null,[t("tr",{class:"bg-slate-50"},[t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Plan "),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Frequency "),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Next Delivery "),t("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"relative px-6 py-4"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",tt,[(c(!0),d(F,null,I(u.value,s=>{var h,b,g,w,_,y;return c(),d("tr",{key:s._id,class:"hover:bg-slate-50/50 transition-colors"},[t("td",et,[t("div",st,[t("div",ot,o(((b=(h=s.userId)==null?void 0:h.firstName)==null?void 0:b.charAt(0))||"U"),1),t("div",lt,[t("div",at,o((g=s.userId)==null?void 0:g.firstName)+" "+o((w=s.userId)==null?void 0:w.lastName),1),t("div",it,o((_=s.userId)==null?void 0:_.email),1)])])]),t("td",nt,[t("div",rt,o(s.name),1),t("div",dt,o(((y=s.items)==null?void 0:y.length)||0)+" items",1)]),t("td",ct,[t("span",pt,o(s.frequency),1)]),t("td",ut,[t("div",xt,o(new Date(s.nextDeliveryDate).toLocaleDateString()),1)]),t("td",mt,[t("span",{class:S(["inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold",{"bg-emerald-100 text-emerald-700":s.status==="active","bg-amber-100 text-amber-700":s.status==="paused","bg-slate-100 text-slate-600":s.status==="cancelled"}])},[t("span",{class:S(["w-1.5 h-1.5 rounded-full mr-2",{"bg-emerald-500":s.status==="active","bg-amber-500":s.status==="paused","bg-slate-400":s.status==="cancelled"}])},null,2),n(" "+o(s.status),1)],2)]),t("td",vt,[P(N,{to:`/admin/subscriptions/${s._id}`,class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-slate-600 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors"},{default:z(()=>[...e[10]||(e[10]=[n(" View ",-1),t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])]),_:1},8,["to"])])])}),128))])])]),u.value.length===0?(c(),d("div",ft,[...e[12]||(e[12]=[t("svg",{class:"mx-auto h-12 w-12 text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("h3",{class:"mt-4 text-sm font-medium text-slate-900"},"No subscriptions found",-1),t("p",{class:"mt-1 text-sm text-slate-500"},"Try adjusting your search or filter criteria.",-1)])])):k("",!0)]),t("div",ht,[t("p",bt,[e[13]||(e[13]=n(" Showing page ",-1)),t("span",gt,o(l.value.page),1),e[14]||(e[14]=n(" of ",-1)),t("span",wt,o(l.value.pages),1),t("span",_t,"("+o(l.value.total)+" results)",1)]),t("div",yt,[t("button",{onClick:e[2]||(e[2]=s=>f(l.value.page-1)),disabled:l.value.page===1,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...e[15]||(e[15]=[t("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),n(" Previous ",-1)])],8,kt),t("button",{onClick:e[3]||(e[3]=s=>f(l.value.page+1)),disabled:l.value.page===l.value.pages,class:"inline-flex items-center px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...e[16]||(e[16]=[n(" Next ",-1),t("svg",{class:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])],8,Ct)])])])}}});typeof M=="function"&&M(St);export{St as default};
