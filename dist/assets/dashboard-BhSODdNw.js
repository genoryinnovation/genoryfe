import{d as y,r as p,j as b,c as l,a as e,e as n,h as _,n as i,t as a,b as g,B as k,u as M,o as r}from"./index-DOnWl8Pk.js";import{P as x}from"./partner.service-BKZDqQx0.js";import"./api-Csnh6SWI.js";const z={class:"min-h-screen bg-gray-50"},B={key:0,class:"flex justify-center items-center h-screen"},C={key:1,class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},j={class:"md:flex md:items-center md:justify-between mb-8"},S={class:"flex-1 min-w-0"},P={class:"mt-1 text-sm text-gray-500"},V={key:0,class:"mt-4 flex md:mt-0 md:ml-4"},O={class:"flex items-center space-x-3"},L={class:"text-sm font-medium text-gray-700"},N={key:0,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-8"},F={key:1,class:"bg-red-50 border-l-4 border-red-400 p-4 mb-8"},T={key:2,class:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3 mb-8"},Y={class:"bg-white overflow-hidden shadow rounded-lg"},D={class:"p-5"},E={class:"flex items-center"},H={class:"ml-5 w-0 flex-1"},I={class:"text-lg font-medium text-gray-900"},R={class:"bg-white overflow-hidden shadow rounded-lg"},W={class:"p-5"},$={class:"flex items-center"},q={class:"ml-5 w-0 flex-1"},A={class:"text-lg font-medium text-gray-900"},G={class:"bg-white shadow overflow-hidden sm:rounded-lg mb-8"},J={class:"border-t border-gray-200 px-4 py-5 sm:p-0"},K={class:"sm:divide-y sm:divide-gray-200"},Q={class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},U={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 capitalize"},X={class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},Z={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},ee={class:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6"},te={class:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"},se={key:2,class:"flex flex-col items-center justify-center h-screen"},ie=y({__name:"dashboard",setup(oe){const f=M(),s=p(null),d=p(!0),h=async()=>{try{const o=await x.getProfile();s.value=o.data}catch(o){console.error("Failed to fetch profile",o)}finally{d.value=!1}},w=async()=>{if(s.value)try{const o=!s.value.isOnline;await x.updateStatus(o),s.value.isOnline=o}catch(o){console.error("Failed to update status",o),alert("Failed to update status")}};return b(()=>{h()}),(o,t)=>{var c,m,u,v;return r(),l("div",z,[d.value?(r(),l("div",B,[...t[1]||(t[1]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)])])):s.value?(r(),l("div",C,[e("div",j,[e("div",S,[t[3]||(t[3]=e("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate"}," Partner Dashboard ",-1)),e("p",P,[t[2]||(t[2]=_(" Status: ",-1)),e("span",{class:i([{"text-yellow-600":s.value.status==="pending","text-green-600":s.value.status==="approved","text-red-600":s.value.status==="rejected"},"font-medium capitalize"])},a(s.value.status),3)])]),s.value.status==="approved"?(r(),l("div",V,[e("div",O,[e("span",L,a(s.value.isOnline?"Online":"Offline"),1),e("button",{onClick:w,class:i([s.value.isOnline?"bg-green-600":"bg-gray-200","relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"])},[e("span",{"aria-hidden":"true",class:i([s.value.isOnline?"translate-x-5":"translate-x-0","pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"])},null,2)],2)])])):n("",!0)]),s.value.status==="pending"?(r(),l("div",N,[...t[4]||(t[4]=[g('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-yellow-700"> Your application is currently under review. We will notify you once it&#39;s approved. </p></div></div>',1)])])):n("",!0),s.value.status==="rejected"?(r(),l("div",F,[...t[5]||(t[5]=[g('<div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><p class="text-sm text-red-700"> Your application has been rejected. Please contact support for more information. </p></div></div>',1)])])):n("",!0),s.value.status==="approved"?(r(),l("div",T,[e("div",Y,[e("div",D,[e("div",E,[t[7]||(t[7]=e("div",{class:"flex-shrink-0 bg-blue-500 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",H,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Total Earnings ",-1)),e("dd",I," ₦ "+a(s.value.earnings.total.toLocaleString()),1)])])])]),e("div",R,[e("div",W,[e("div",$,[t[9]||(t[9]=e("div",{class:"flex-shrink-0 bg-green-500 rounded-md p-3"},[e("svg",{class:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})])],-1)),e("div",q,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"}," Current Balance ",-1)),e("dd",A," ₦ "+a(s.value.earnings.balance.toLocaleString()),1)])])])])])):n("",!0),e("div",G,[t[13]||(t[13]=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"}," Vehicle Information ")],-1)),e("div",J,[e("dl",K,[e("div",Q,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"Type",-1)),e("dd",U,a((c=s.value.vehicle)==null?void 0:c.type),1)]),e("div",X,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500"},"Make & Model",-1)),e("dd",Z,a((m=s.value.vehicle)==null?void 0:m.make)+" "+a((u=s.value.vehicle)==null?void 0:u.model),1)]),e("div",ee,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500"},"Plate Number",-1)),e("dd",te,a((v=s.value.vehicle)==null?void 0:v.plateNumber),1)])])])])])):(r(),l("div",se,[t[14]||(t[14]=e("p",{class:"text-gray-500 mb-4"},"You are not a partner yet.",-1)),e("button",{onClick:t[0]||(t[0]=le=>k(f).push("/app/partner/onboarding")),class:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Become a Partner ")]))])}}});export{ie as default};
