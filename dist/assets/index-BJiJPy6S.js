import{d as y,r as l,f as _,c,a as t,t as o,e as f,v as b,F as w,l as k,j as N,o as p,h as U,i as A,k as S}from"./index-C4KQTk6n.js";import{U as g}from"./user.service-6_qoh3l6.js";import"./api-Csnh6SWI.js";const T={class:"grid grid-cols-1 gap-5 sm:grid-cols-3 mb-6"},C={class:"bg-white overflow-hidden shadow rounded-lg"},V={class:"px-4 py-5 sm:p-6"},D={class:"mt-1 text-3xl font-semibold text-gray-900"},F={class:"bg-white overflow-hidden shadow rounded-lg"},P={class:"px-4 py-5 sm:p-6"},j={class:"mt-1 text-3xl font-semibold text-green-600"},B={class:"bg-white overflow-hidden shadow rounded-lg"},$={class:"px-4 py-5 sm:p-6"},E={class:"mt-1 text-3xl font-semibold text-gray-500"},I={class:"mb-6 flex gap-4"},L={class:"bg-white shadow overflow-hidden sm:rounded-lg"},M={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},J={class:"px-6 py-4 whitespace-nowrap"},q={class:"flex items-center"},z={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 font-bold"},G={class:"ml-4"},H={class:"text-sm font-medium text-gray-900"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},O={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},W={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},X={class:"mt-4 flex justify-between items-center"},Y={class:"text-sm text-gray-700"},Z={class:"flex space-x-2"},tt=["disabled"],et=["disabled"],it=y({__name:"index",setup(st){const u=l([]),i=l({}),n=l(""),s=l({page:1,limit:10,total:0,pages:1});let x;const r=async()=>{try{const[d,e]=await Promise.all([g.getUsers(s.value.page,s.value.limit,n.value),g.getUserStats()]);u.value=d.data.users,s.value=d.data.pagination,i.value=e.data}catch(d){console.error("Failed to fetch users",d)}},v=()=>{clearTimeout(x),x=setTimeout(()=>{s.value.page=1,r()},300)},m=d=>{d>=1&&d<=s.value.pages&&(s.value.page=d,r())};return _(()=>{r()}),(d,e)=>{const h=N("router-link");return p(),c("div",null,[e[8]||(e[8]=t("h1",{class:"text-2xl font-semibold text-gray-900 mb-6"},"Users",-1)),t("div",T,[t("div",C,[t("div",V,[e[3]||(e[3]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Users",-1)),t("dd",D,o(i.value.total||0),1)])]),t("div",F,[t("div",P,[e[4]||(e[4]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active",-1)),t("dd",j,o(i.value.active||0),1)])]),t("div",B,[t("div",$,[e[5]||(e[5]=t("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Inactive",-1)),t("dd",E,o(i.value.inactive||0),1)])])]),t("div",I,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),onInput:v,type:"text",placeholder:"Search users...",class:"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[b,n.value]])]),t("div",L,[t("table",M,[e[7]||(e[7]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Joined "),t("th",{scope:"col",class:"relative px-6 py-3"},[t("span",{class:"sr-only"},"Actions")])])],-1)),t("tbody",R,[(p(!0),c(w,null,k(u.value,a=>(p(),c("tr",{key:a._id},[t("td",J,[t("div",q,[t("div",z,o(a.firstName.charAt(0))+o(a.lastName.charAt(0)),1),t("div",G,[t("div",H,o(a.firstName)+" "+o(a.lastName),1)])])]),t("td",K,o(a.email),1),t("td",O,o(a.phone||"N/A"),1),t("td",Q,o(new Date(a.createdAt).toLocaleDateString()),1),t("td",W,[U(h,{to:`/admin/users/${a._id}`,class:"text-blue-600 hover:text-blue-900"},{default:A(()=>[...e[6]||(e[6]=[S(" View ",-1)])]),_:1},8,["to"])])]))),128))])])]),t("div",X,[t("div",Y," Showing page "+o(s.value.page)+" of "+o(s.value.pages)+" ("+o(s.value.total)+" results) ",1),t("div",Z,[t("button",{onClick:e[1]||(e[1]=a=>m(s.value.page-1)),disabled:s.value.page===1,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Previous ",8,tt),t("button",{onClick:e[2]||(e[2]=a=>m(s.value.page+1)),disabled:s.value.page===s.value.pages,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Next ",8,et)])])])}}});export{it as default};
