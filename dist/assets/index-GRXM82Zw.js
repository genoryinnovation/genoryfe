import{d as j,r as l,f as D,c as r,a as e,h as v,i as y,t as o,e as f,v as N,p as S,F as P,l as F,j as U,o as c,k as h,n as A}from"./index-C4KQTk6n.js";import{C as u}from"./catalog.service-DTry473v.js";import"./api-Csnh6SWI.js";const B={class:"flex justify-between items-center mb-6"},L={class:"grid grid-cols-1 gap-5 sm:grid-cols-4 mb-6"},M={class:"bg-white overflow-hidden shadow rounded-lg"},q={class:"px-4 py-5 sm:p-6"},E={class:"mt-1 text-3xl font-semibold text-gray-900"},I={class:"bg-white overflow-hidden shadow rounded-lg"},O={class:"px-4 py-5 sm:p-6"},R={class:"mt-1 text-3xl font-semibold text-green-600"},z={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"px-4 py-5 sm:p-6"},G={class:"mt-1 text-3xl font-semibold text-yellow-600"},H={class:"bg-white overflow-hidden shadow rounded-lg"},J={class:"px-4 py-5 sm:p-6"},Q={class:"mt-1 text-3xl font-semibold text-red-600"},W={class:"mb-6 flex gap-4"},X=["value"],Y={class:"bg-white shadow overflow-hidden sm:rounded-lg"},Z={class:"min-w-full divide-y divide-gray-200"},ee={class:"bg-white divide-y divide-gray-200"},te={class:"px-6 py-4 whitespace-nowrap"},se={class:"flex items-center"},oe={class:"h-10 w-10 flex-shrink-0"},ae=["src"],de={class:"ml-4"},le={class:"text-sm font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ce={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap"},pe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},xe=["onClick"],ge={class:"mt-4 flex justify-between items-center"},me={class:"text-sm text-gray-700"},ve={class:"flex space-x-2"},ye=["disabled"],fe=["disabled"],Ce=j({__name:"index",setup(he){const b=l([]),_=l([]),n=l({}),p=l(""),x=l(""),g=l(""),d=l({page:1,limit:10,total:0,pages:1});let w;const V=async()=>{try{const a=await u.getCategories();_.value=a.data}catch(a){console.error("Failed to fetch categories",a)}},i=async()=>{try{const[a,t]=await Promise.all([u.getProducts(d.value.page,d.value.limit,p.value,x.value,g.value),u.getProductStats()]);b.value=a.data.products,d.value=a.data.pagination,n.value=t.data}catch(a){console.error("Failed to fetch products",a)}},T=()=>{clearTimeout(w),w=setTimeout(()=>{d.value.page=1,i()},300)},k=a=>{a>=1&&a<=d.value.pages&&(d.value.page=a,i())},$=async a=>{if(confirm("Are you sure you want to delete this product?"))try{await u.deleteProduct(a),i()}catch(t){console.error("Failed to delete product",t)}};return D(()=>{V(),i()}),(a,t)=>{const m=U("router-link");return c(),r("div",null,[e("div",B,[t[6]||(t[6]=e("h1",{class:"text-2xl font-semibold text-gray-900"},"Products",-1)),v(m,{to:"/admin/catalog/products/create",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700"},{default:y(()=>[...t[5]||(t[5]=[h(" Add Product ",-1)])]),_:1})]),e("div",L,[e("div",M,[e("div",q,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Products",-1)),e("dd",E,o(n.value.total||0),1)])]),e("div",I,[e("div",O,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active",-1)),e("dd",R,o(n.value.active||0),1)])]),e("div",z,[e("div",K,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Low Stock",-1)),e("dd",G,o(n.value.lowStock||0),1)])]),e("div",H,[e("div",J,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Out of Stock",-1)),e("dd",Q,o(n.value.outOfStock||0),1)])])]),e("div",W,[f(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s),onInput:T,type:"text",placeholder:"Search products...",class:"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},null,544),[[N,p.value]]),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.value=s),onChange:i,class:"border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},[t[11]||(t[11]=e("option",{value:""},"All Categories",-1)),(c(!0),r(P,null,F(_.value,s=>(c(),r("option",{key:s._id,value:s._id},o(s.name),9,X))),128))],544),[[S,x.value]]),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),onChange:i,class:"border border-gray-300 rounded-md px-4 py-2 focus:ring-blue-500 focus:border-blue-500"},[...t[12]||(t[12]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"discontinued"},"Discontinued",-1)])],544),[[S,g.value]])]),e("div",Y,[e("table",Z,[t[15]||(t[15]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Product "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," SKU "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Price "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Stock "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"relative px-6 py-3"},[e("span",{class:"sr-only"},"Actions")])])],-1)),e("tbody",ee,[(c(!0),r(P,null,F(b.value,s=>{var C;return c(),r("tr",{key:s._id},[e("td",te,[e("div",se,[e("div",oe,[e("img",{class:"h-10 w-10 rounded-full object-cover",src:s.images[0]||"https://via.placeholder.com/40",alt:""},null,8,ae)]),e("div",de,[e("div",le,o(s.title),1),e("div",ie,o((C=s.category)==null?void 0:C.name),1)])])]),e("td",ne,o(s.sku),1),e("td",re,o(s.currency)+" "+o(s.price.toFixed(2)),1),e("td",ce,[e("span",{class:A(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.inventory.quantity<=s.inventory.reorderLevel?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},o(s.inventory.quantity)+" "+o(s.inventory.unit),3)]),e("td",ue,[e("span",{class:A(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="active","bg-gray-100 text-gray-800":s.status==="inactive","bg-red-100 text-red-800":s.status==="discontinued"}])},o(s.status),3)]),e("td",pe,[v(m,{to:`/admin/catalog/products/${s._id}`,class:"text-blue-600 hover:text-blue-900 mr-4"},{default:y(()=>[...t[13]||(t[13]=[h(" View ",-1)])]),_:1},8,["to"]),v(m,{to:`/admin/catalog/products/${s._id}/edit`,class:"text-indigo-600 hover:text-indigo-900 mr-4"},{default:y(()=>[...t[14]||(t[14]=[h(" Edit ",-1)])]),_:1},8,["to"]),e("button",{onClick:be=>$(s._id),class:"text-red-600 hover:text-red-900"}," Delete ",8,xe)])])}),128))])])]),e("div",ge,[e("div",me," Showing page "+o(d.value.page)+" of "+o(d.value.pages)+" ("+o(d.value.total)+" results) ",1),e("div",ve,[e("button",{onClick:t[3]||(t[3]=s=>k(d.value.page-1)),disabled:d.value.page===1,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Previous ",8,ye),e("button",{onClick:t[4]||(t[4]=s=>k(d.value.page+1)),disabled:d.value.page===d.value.pages,class:"px-3 py-1 border border-gray-300 rounded-md disabled:opacity-50"}," Next ",8,fe)])])])}}});export{Ce as default};
