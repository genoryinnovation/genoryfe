import{d as j,k as B,u as N,r as b,x as z,o as D,a as i,j as n,b as t,D as k,t as v,g as p,p as r,z as a,A as f,F as C,f as U,G as A,E as V,e as I,q as R,C as M}from"./index-C8zvf3I_.js";import{C as g}from"./catalog.service-BFW32g3N.js";import"./api-4GkiaaGr.js";const F={class:"space-y-6"},E={class:"flex items-center space-x-4"},G={class:"text-2xl font-bold text-slate-900"},K={class:"mt-1 text-sm text-slate-500"},H={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},T={class:"p-6 space-y-6"},$={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},O={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},Q={class:"p-6"},J={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},W=["value"],X={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},Y={class:"p-6"},Z={class:"grid grid-cols-1 gap-6 sm:grid-cols-3"},_={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},ee={class:"p-6 space-y-6"},te={class:"flex gap-4"},se={class:"flex-1 relative"},oe=["onKeypress"],re={key:0,class:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-6 gap-4"},le=["src"],ie={class:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},ne=["onClick"],ae={key:1,class:"text-center py-8 border-2 border-dashed border-slate-200 rounded-2xl"},de={class:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden"},ue={class:"p-6"},pe={class:"flex justify-end space-x-3"},ce=["disabled"],me={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},be=j({__name:"edit",setup(ve){const x=B(),c=N(),m=b(!1),u=b(!1),y=b([]),o=z({title:"",sku:"",description:"",price:0,currency:"NGN",category:"",inventory:{quantity:0,unit:"pieces",reorderLevel:10},status:"active",images:[]}),d=b(""),w=()=>{d.value&&!o.images.includes(d.value)&&(o.images.push(d.value),d.value="")},P=l=>{o.images.splice(l,1)},L=async()=>{try{const l=await g.getCategories();y.value=l.data}catch(l){console.error("Failed to fetch categories",l)}},q=async l=>{try{const s=(await g.getProduct(l)).data;Object.assign(o,{title:s.title,sku:s.sku,description:s.description,price:s.price,currency:s.currency,category:s.category._id||s.category,inventory:{quantity:s.inventory.quantity,unit:s.inventory.unit,reorderLevel:s.inventory.reorderLevel},status:s.status,images:s.images})}catch(e){console.error("Failed to fetch product",e),c.push("/admin/catalog/products")}},S=async()=>{u.value=!0;try{m.value?await g.updateProduct(x.params.id,o):await g.createProduct(o),c.push("/admin/catalog/products")}catch(l){console.error("Failed to save product",l),alert("Failed to save product")}finally{u.value=!1}};return D(async()=>{await L(),x.params.id&&(m.value=!0,await q(x.params.id))}),(l,e)=>(n(),i("div",F,[t("div",E,[t("button",{onClick:e[0]||(e[0]=s=>k(c).back()),class:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-xl transition-colors"},[...e[13]||(e[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])]),t("div",null,[t("h1",G,v(m.value?"Edit Product":"Create Product"),1),t("p",K,v(m.value?"Update product information":"Add a new product to the catalog"),1)])]),t("form",{onSubmit:V(S,["prevent"]),class:"space-y-6"},[t("div",H,[e[17]||(e[17]=p('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Basic Information</h3></div>',1)),t("div",T,[t("div",$,[t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Title",-1)),r(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.title=s),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Product title"},null,512),[[a,o.title]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"SKU",-1)),r(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.sku=s),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all font-mono",placeholder:"PROD-001"},null,512),[[a,o.sku]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Description",-1)),r(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>o.description=s),rows:"3",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all resize-none",placeholder:"Product description..."},null,512),[[a,o.description]])])])]),t("div",O,[e[23]||(e[23]=p('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Pricing &amp; Category</h3></div>',1)),t("div",Q,[t("div",J,[t("div",null,[e[18]||(e[18]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Price",-1)),r(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>o.price=s),type:"number",min:"0",step:"0.01",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"0.00"},null,512),[[a,o.price,void 0,{number:!0}]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Currency",-1)),r(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>o.currency=s),class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[...e[19]||(e[19]=[t("option",{value:"NGN"},"NGN",-1),t("option",{value:"USD"},"USD",-1)])],512),[[f,o.currency]])]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Category",-1)),r(t("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.category=s),required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[e[21]||(e[21]=t("option",{value:"",disabled:""},"Select category",-1)),(n(!0),i(C,null,U(y.value,s=>(n(),i("option",{key:s._id,value:s._id},v(s.name),9,W))),128))],512),[[f,o.category]])])])])]),t("div",X,[e[27]||(e[27]=p('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Inventory</h3></div>',1)),t("div",Y,[t("div",Z,[t("div",null,[e[24]||(e[24]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Quantity",-1)),r(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.inventory.quantity=s),type:"number",min:"0",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"0"},null,512),[[a,o.inventory.quantity,void 0,{number:!0}]])]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Unit",-1)),r(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.inventory.unit=s),type:"text",required:"",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"e.g., pieces, kg"},null,512),[[a,o.inventory.unit]])]),t("div",null,[e[26]||(e[26]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Reorder Level",-1)),r(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.inventory.reorderLevel=s),type:"number",min:"0",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"10"},null,512),[[a,o.inventory.reorderLevel,void 0,{number:!0}]])])])])]),t("div",_,[e[30]||(e[30]=p('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-rose-500 to-rose-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Product Images</h3></div>',1)),t("div",ee,[t("div",te,[t("div",se,[r(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>d.value=s),type:"url",class:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Paste image URL here...",onKeypress:A(V(w,["prevent"]),["enter"])},null,40,oe),[[a,d.value]])]),t("button",{type:"button",onClick:w,class:"px-5 py-2.5 bg-slate-900 text-white text-sm font-semibold rounded-xl hover:bg-slate-800 transition-colors"}," Add URL ")]),o.images.length>0?(n(),i("div",re,[(n(!0),i(C,null,U(o.images,(s,h)=>(n(),i("div",{key:h,class:"relative group aspect-square rounded-xl overflow-hidden border border-slate-200 bg-slate-50"},[t("img",{src:s,class:"w-full h-full object-cover"},null,8,le),t("div",ie,[t("button",{type:"button",onClick:ge=>P(h),class:"p-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-colors shadow-lg"},[...e[28]||(e[28]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,ne)])]))),128))])):(n(),i("div",ae,[...e[29]||(e[29]=[t("p",{class:"text-sm text-slate-500"},"No images added yet. Add URLs to see previews.",-1)])]))])]),t("div",de,[e[33]||(e[33]=p('<div class="px-6 py-4 border-b border-slate-100 flex items-center space-x-3"><div class="p-2 bg-gradient-to-br from-amber-500 to-amber-600 rounded-lg"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-lg font-semibold text-slate-900">Status</h3></div>',1)),t("div",ue,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-slate-700 mb-2"},"Product Status",-1)),r(t("select",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.status=s),class:"w-full sm:w-1/3 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all"},[...e[31]||(e[31]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"discontinued"},"Discontinued",-1)])],512),[[f,o.status]])])]),t("div",pe,[t("button",{type:"button",onClick:e[12]||(e[12]=s=>k(c).back()),class:"px-5 py-2.5 border border-slate-200 rounded-xl text-sm font-semibold text-slate-700 hover:bg-slate-50 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:u.value,class:"inline-flex items-center px-5 py-2.5 text-sm font-semibold rounded-xl text-white bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 shadow-lg shadow-primary-500/25 transition-all disabled:opacity-50 disabled:cursor-not-allowed"},[u.value?(n(),i("svg",me,[...e[34]||(e[34]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):I("",!0),R(" "+v(u.value?"Saving...":"Save Product"),1)],8,ce)])],32)]))}});typeof M=="function"&&M(be);export{be as default};
