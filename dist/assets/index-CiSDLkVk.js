import{d as k,r as n,o as C,a,j as o,b as t,e as d,F as v,f as y,t as r,n as h,g as z,B as j,s as M,v as T,y as g}from"./index-5jFCLG0b.js";import{P as b}from"./partner-portal.service-BUr-YCxR.js";import"./api-Cc7xRAfh.js";const A={class:"space-y-6"},B={class:"flex justify-between items-center"},S={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},V={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden"},D={key:0,class:"absolute inset-0 bg-white/50 backdrop-blur-[2px] flex items-center justify-center z-10"},F={class:"space-y-4"},R={key:0,class:"py-12 text-center text-slate-500 text-sm"},q={class:"font-medium text-slate-900 text-sm"},L={class:"text-[10px] text-slate-500"},N={class:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 relative overflow-hidden"},P={key:0,class:"absolute inset-0 bg-white/50 backdrop-blur-[2px] flex items-center justify-center z-10"},H={class:"space-y-4"},W={key:0,class:"py-12 text-center text-slate-500 text-sm"},$={class:"font-bold text-slate-900 text-sm italic"},E={class:"text-[10px] text-slate-500 font-medium uppercase"},U={class:"text-right"},G={class:"font-bold text-slate-900 text-sm"},I={key:0,class:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm flex items-center justify-center z-50 p-4"},J={class:"bg-white rounded-3xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200"},K={class:"space-y-1"},O={class:"pt-4 flex space-x-3"},Q=["disabled"],X={key:0},Y={key:1,class:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24"},Z=k({__name:"index",setup(tt){const w=n(0),p=n([]),x=n([]),i=n(!0),c=n(!1),u=n(!1),m=n(5e4),f=async()=>{try{i.value=!0;const[l,e]=await Promise.all([b.getTransactions(),b.getTopupRequests()]);w.value=l.balance,p.value=l.transactions,x.value=e}catch(l){console.error("Failed to fetch wallet data",l)}finally{i.value=!1}},_=async()=>{var l,e;try{c.value=!0,await b.requestTopup(m.value),u.value=!1,await f(),alert("Top-up request sent successfully. Admin will review and credit your wallet.")}catch(s){alert(((e=(l=s.response)==null?void 0:l.data)==null?void 0:e.message)||"Failed to request top-up")}finally{c.value=!1}};return C(f),(l,e)=>(o(),a("div",A,[t("div",B,[e[3]||(e[3]=t("div",null,[t("h1",{class:"text-2xl font-bold text-slate-900"},"Wallet & Reports"),t("p",{class:"text-slate-500"},"Manage your company budget and view transaction reports.")],-1)),t("button",{onClick:e[0]||(e[0]=s=>u.value=!0),class:"px-6 py-2 bg-primary-600 text-white font-bold rounded-xl hover:bg-primary-700 transition-all shadow-lg shadow-primary-500/25"}," Fund Wallet ")]),t("div",S,[t("div",V,[i.value?(o(),a("div",D,[...e[4]||(e[4]=[t("svg",{class:"animate-spin h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):d("",!0),e[5]||(e[5]=t("h3",{class:"text-lg font-bold text-slate-900 mb-4"},"Completed Transactions",-1)),t("div",F,[p.value.length===0&&!i.value?(o(),a("div",R," No transactions found. ")):d("",!0),(o(!0),a(v,null,y(p.value,s=>(o(),a("div",{key:s._id,class:"flex justify-between items-center py-3 border-b border-slate-100 last:border-0"},[t("div",null,[t("p",q,r(s.reason),1),t("p",L,r(new Date(s.createdAt).toLocaleString()),1)]),t("p",{class:h(["font-bold text-sm",s.transactionType==="credit"?"text-emerald-600":"text-rose-600"])},r(s.transactionType==="credit"?"+":"-")+"₦"+r(s.nairaAmount.toLocaleString()),3)]))),128))])]),t("div",N,[i.value?(o(),a("div",P,[...e[6]||(e[6]=[t("svg",{class:"animate-spin h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):d("",!0),e[7]||(e[7]=t("h3",{class:"text-lg font-bold text-slate-900 mb-4"},"Funding Requests",-1)),t("div",H,[x.value.length===0&&!i.value?(o(),a("div",W," No active funding requests. ")):d("",!0),(o(!0),a(v,null,y(x.value,s=>(o(),a("div",{key:s._id,class:"flex justify-between items-center py-3 border-b border-slate-100 last:border-0"},[t("div",null,[t("p",$,r(s.reference),1),t("p",E,r(new Date(s.createdAt).toLocaleDateString()),1)]),t("div",U,[t("p",G,"₦"+r(s.amount.toLocaleString()),1),t("span",{class:h(["text-[10px] font-bold px-2 py-0.5 rounded uppercase tracking-tighter",s.status==="approved"?"bg-emerald-100 text-emerald-600":s.status==="rejected"?"bg-rose-100 text-rose-600":"bg-amber-100 text-amber-600"])},r(s.status),3)])]))),128))])])]),u.value?(o(),a("div",I,[t("div",J,[e[10]||(e[10]=z('<div class="p-8 border-b border-slate-100 text-center"><div class="w-16 h-16 bg-primary-100 text-primary-600 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><h3 class="text-2xl font-black text-slate-900 italic">Top-up Wallet</h3><p class="text-slate-500 text-sm mt-1">Request a balance top-up for your company.</p></div>',1)),t("form",{onSubmit:j(_,["prevent"]),class:"p-8 space-y-6"},[t("div",K,[e[8]||(e[8]=t("label",{class:"text-xs font-bold text-slate-500 uppercase tracking-widest pl-1"},"Amount (₦)",-1)),M(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),type:"number",required:"",min:"1000",placeholder:"50,000",class:"w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-2xl focus:bg-white focus:ring-4 focus:ring-primary-500/10 outline-none transition-all text-2xl font-black text-center"},null,512),[[T,m.value]])]),t("div",O,[t("button",{type:"button",onClick:e[2]||(e[2]=s=>u.value=!1),class:"flex-1 py-4 text-slate-500 font-bold rounded-2xl hover:bg-slate-50 transition-colors"}," Cancel "),t("button",{type:"submit",disabled:c.value,class:"flex-1 py-4 bg-primary-600 text-white font-bold rounded-2xl hover:bg-primary-700 transition-all shadow-xl shadow-primary-600/20 flex items-center justify-center space-x-2 disabled:opacity-50"},[c.value?(o(),a("svg",Y,[...e[9]||(e[9]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(o(),a("span",X,"Request Crediting"))],8,Q)])],32)])])):d("",!0)]))}});typeof g=="function"&&g(Z);export{Z as default};
